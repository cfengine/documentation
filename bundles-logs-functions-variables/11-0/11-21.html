<h3>11.21 Function getfields</h3>

<p><b>Synopsis</b>: getfields(arg1,arg2,arg3,arg4) returns type <b>int</b>

   <p><br>
   <i>arg1</i> : Regular expression to match line, <i>in the range</i> .*
<br>
   <i>arg2</i> : Filename to read, <i>in the range</i> "?(/.*)
<br>
   <i>arg3</i> : Regular expression to split fields, <i>in the range</i> .*
<br>
   <i>arg4</i> : Return array name, <i>in the range</i> .*
<br>

<p>Get an array of fields in the lines matching regex arg1 in file arg2, split on regex arg3 as array name arg4

<p><b>Example</b>:<br>
<br>

<pre>
bundle agent example

{     
vars:

  "no" int => getfields("mark:.*","/etc/passwd",":","userdata");

reports:

  cfengine_3::

    "Found $(no) lines matching";
    "Mark's homedir = $(userdata[6])";

}

</pre>

<p><b>Notes</b>:<br>
<br>

   <p>This function matches lines (using a regular expression) in the named file, and splits the <i>first</i> matched line into fields (using a second regular expression), placing these into a named array whose elements are <code>array[1],array[2],..</code>. This is useful for examining user data in the Unix password or group files.

     <dl>
<dt><samp><span>regex</span></samp><dd>A regular expression matching one or more lines. The regular expression is anchored, meaning it must match the entire line (see <a>Anchored vs. unanchored regular expressions</a>).

     <br><dt><samp><span>filename</span></samp><dd>The name of the file to be examined.

     <br><dt><samp><span>split</span></samp><dd>A regex pattern that is used to parse the field separator(s) to split up the file into items

     <br><dt><samp><span>array_lval</span></samp><dd>The base name of the array that returns the values.

   </dl>

   <p>The function returns the number of lines matched. This function is most useful when you want only the first matching line (e.g., to mimic the behavior of the <i>getpwnam(3)</i> on the file <samp><span>/etc/passwd</span></samp>). If you want to examine <i>all</i> matching lines, use <a>Function readstringarray</a>, instead.

<div>
<a></a>

</div>


