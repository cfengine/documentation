<h3>11.85 Function remotescalar</h3>

<p><b>Synopsis</b>: remotescalar(arg1,arg2,arg3) returns type <b>string</b>

   <p><br>
   <i>arg1</i> : Variable identifier, <i>in the range</i> [a-zA-Z0-9_$(){}\[\].:]+
<br>
   <i>arg2</i> : Hostname or IP address of server, <i>in the range</i> .*
<br>
   <i>arg3</i> : Use enryption, <i>in the range</i> true,false,yes,no,on,off
<br>

<p>Read a scalar value from a remote cfengine server

<p><b>Example</b>:<br>
<br>

<pre>
vars:

 "remote" string => remotescalar("test_scalar","127.0.0.1","yes");

</pre>

<p><b>Notes</b>:<br>
<br>
The remote system's cf-serverd must accept the query for the requested variable from the host that is requesting it. An example of this configuration follows.

   <p>This function asks for an identifier. It is up to the server to interpret what this means and to return a value of its choosing. If the identifier matches a persistent scalar variable then this will be returned preferentially. If no such variable is found, then the server will look for a literal string in a server bundle with a handle that matches the requested object.

<pre>bundle server access
{
access:
  "value of my test_scalar, can expand variables here - $(sys.host)"
    handle => "test_scalar",
    comment => "Grant access to contents of test_scalar VAR",
    resource_type => "literal",
    admit => { "127.0.0.1" };
}
</pre>

   <p>CFEngine caches the value of this variable, so that, if the network is unavailable, the last known value will be used. Hence use of this function is fault tolerant. Care should be taken in attempting to access remote variables that are not available, as the repeated connections needed to resolve the absence of a value can lead to undesirable behaviour. As a general rule, users are recommended to refrain from relying on the availability of network resources.

   <p><table><tr><td>
<pre>     
     (string) remotescalar(<var>resource handle</var>,<var>host/IP address</var>,<var>encrypt</var>);
     
</pre>
   </td></tr></table>

   <p>This function downloads a string from a remote server, using the promise handle as a variable identifier. Availability: Enterprise editions of CFEngine only.

<p><b>ARGUMENTS</b>:

     <dl>
<dt><samp><span>resource handle</span></samp><dd>The name of the promise on the server side <br><dt><samp><span>host or IP address</span></samp><dd>The location of the server on which the resource resides. 
<br><dt><samp><span>encrypt</span></samp><dd>Whether to encrypt the connection to the server.
     <pre>               true
               yes
               false
               no
</pre>
     </dl>

   <p>Note that this function assumes that you have already performed a successful key exchange between systems, (e.g. using either a remote copy or <code>cf-runagent</code> connection). It contains no mechanism for trust establishment and will fail if there is no trust relationship established in advance.

<div>
<a></a>

</div>


