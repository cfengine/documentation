<html lang="en">
<head>
<title>Community Open Promise Body Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Community Open Promise Body Library">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
@font-face {
    font-family: 'CFE_FONT';
    src: url('fonts/eot/opensans-regular-webfont.eot');
    src: local('â˜º'),  url('fonts/ttf/opensans-regular-webfont.ttf') format('truetype'), url('fonts/svg/opensans-regular-webfont.svg') format('svg');
    font-weight: normal;
    font-style: normal;
}    
pre {
    background-color: #EEFFDD;
    border: 1px solid #CCCCCC;
    font-family: courier;
    margin-bottom: 10px;
    margin-top: 10px;
    padding: 5px;
    font-size: 90%;
    }
pre.display { font-family:inherit }
pre.format  { font-family:inherit }
pre.smallexample
pre.smalllisp,
pre.smallformat,
pre.smalldisplay {
  font-size: 90%;
} 

span.sc    { font-variant:small-caps }
span.roman { font-family:serif; font-weight:normal; } 
span.sansserif { font-family:sans-serif; font-weight:normal; } 

body {
    font:  90%  'CFE_FONT', arial, Helvetica,sans-serif; 
    color: #646464;
    padding: 10px 20px;
    width: 960px;
    margin: 0 auto;
}
.node
{
    text-align: right;
    padding: 2px;
    font-size: smaller;
}
.node hr {
    border: 0;
    width: 100%;
    color: #CCC;
    background-color: #CCC;
    height: 5px;
}
.section {
    padding-right: 0px;
    padding-bottom: 0px;
    padding-left: 0px;
}

h1 {
    font-size: 26px;
    font-weight: normal;
    line-height: 32px;
    margin: 32px 0 16px;
    text-align: left;
    text-transform: uppercase;
}

h2 {
    color: #9E9981 !important;
    font-size: 16px;
    line-height: 18px;
    font-weight: normal;
    margin: 16px 0 26px;
    text-align: left;
}
h3 {
    margin-top: 3px;
    margin-right: 0px;
    margin-bottom: 10px;
    margin-left: 0px;
    line-height: 20px;
    font-size: 16px;
    font-weight: normal;
}

.contents
{
    background-color: #CCC;
    padding-top: 2px;
    padding-right: 2px;
    padding-bottom: 2px;
    padding-left: 10px;
}

.index-cp
{  
background: #fff url(index-cp.png) right repeat-y;
}

.index-vr
{  
background: #fff url(index-vr.png) right repeat-y;
}

.index-mb
{  
background: #eee url(index-faq.png) right repeat-y;
}

table.border
{
	border-color: #666;
	border-width: 0px;
}

FONT.liten {font-size: 80%; }
 
.tynn {
    font-family: Arial, Helvetica, sans-serif;
    font-size: smaller;
    font-style: normal;
    font-weight: lighter;
    margin-bottom: 0em;
    font-size: 11pt;
}
.verbatim {
    color: #000;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 20px;
    margin-left: 0px;
}
.example {
    color: #000;
    width: 100%;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 20px;
    margin-left: 0px;
}
.smallexample {
    color: #000;
    padding-top: 10px;
    padding-right: 30px;
    padding-bottom: 5px;
    padding-left: 30px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
    margin-left: 0px;
}
.cartouche {
    padding: 5px;
    font-style: italic;
    font-size: 85%;
}

table.cartouche {
    border: none !important;
}

 .cartouche td  {
    background-color: #ddd;
    border: 1px solid #ccc;
    padding: 5px;
}

A:link { color: #2c2e70 }
A:visited { color: black }
A:active { color: #600041 }
dt em {font-weight: bold}
/* don't change this rule */    
pre.sp {
    background: none !important;   
    border:none !important
}
/* --- */
/*code hightlight*/
.red { color: #b80047; font-weight: bold; }

.blue { color: blue;  /*font-weight: bold;*/ }

.green { color: darkgreen; }

.comment { font-style: italic; }
--></style>
</head>
<body>
<h1 class="settitle">Community Open Promise Body Library</h1>
<div class="node">
<a name="Top"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#dir">(dir)</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#dir">(dir)</a>

</div>

<h2 class="unnumbered">Cfengine-Open-Promise-Body-Library</h2>

   <p><a href="#Contents">COMPLETE TABLE OF CONTENTS</a>
<h2>Summary of contents</h2>

<ul class="menu">
<li><a accesskey="1" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>
</ul>

<div class="node">
<a name="The-Purpose-Of-This-Handbook"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Top">Top</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">1 The Purpose Of This Handbook</h2>

<pre class="sp">

</pre>

Cfengine is built on promises. Promises were chosen as the model for Cfengine's
configuration language, because they represent an expression of intention.

   <p>If you are using custom scripts to manage your systems, you are using
<i>recipes</i>. Take a look at any cookbook and you will see that all
recipes look the same: take flour, eggs, butter, sugar ... and you
know nothing because you can make a hundred things from these steps. 
If you don't make clear your intention, it is very hard to know what
the recipe is supposed to be: is it a cake, a waffle, a pastry?

   <p>The same is true in system administration. Recipes are not merely
scripts, they encapsulate knowledge and experience. Their value is
in communicating <i>desired outcomes</i> or states.

   <p>This library of standard components is like a cookbook that tells you
only how to make basics well. It gives these basic skills names and
therefore gives you a common vocabulary &ndash; you will put together these
basics in creative ways to build your systems.

   <pre class="sp">


</pre>

<p><table class="cartouche" summary="cartouche" border="1"><tr><td>

   <p>Please contribute to this guide by helping to develop a repertoire of
basic skills and names. This collection should be comprehensive but
parsimonious. Basics are only basics if they are few and carefully
thought out. This is a work in progress and your experience is welcome.

   <p>This library will be moderated by Cfengine, and contributions and discussions
ca n be made to the help-cfengine@cfengine.org mailing list.

   </td></tr></table>

<ul class="menu">
<li><a accesskey="1" href="#body-acl-access_005fgeneric">body acl access_generic</a>
<li><a accesskey="2" href="#body-acl-ntfs">body acl ntfs</a>
<li><a accesskey="3" href="#body-acl-strict">body acl strict</a>
<li><a accesskey="4" href="#body-action-bg">body action bg</a>
<li><a accesskey="5" href="#body-action-if_005felapsed">body action if_elapsed</a>
<li><a accesskey="6" href="#body-action-ifwin_005fbg">body action ifwin_bg</a>
<li><a accesskey="7" href="#body-action-immediate">body action immediate</a>
<li><a accesskey="8" href="#body-action-log_005frepaired">body action log_repaired</a>
<li><a accesskey="9" href="#body-action-log_005fverbose">body action log_verbose</a>
<li><a href="#body-action-measure_005fperformance">body action measure_performance</a>
<li><a href="#body-action-policy">body action policy</a>
<li><a href="#body-action-sample_005frate">body action sample_rate</a>
<li><a href="#body-action-warn_005fonly">body action warn_only</a>
<li><a href="#body-changes-detect_005fall_005fchange">body changes detect_all_change</a>
<li><a href="#body-changes-detect_005fcontent">body changes detect_content</a>
<li><a href="#body-changes-diff">body changes diff</a>
<li><a href="#body-changes-diff_005fnoupdate">body changes diff_noupdate</a>
<li><a href="#body-changes-noupdate">body changes noupdate</a>
<li><a href="#body-classes-always">body classes always</a>
<li><a href="#body-classes-cf2_005fif_005felse">body classes cf2_if_else</a>
<li><a href="#body-classes-cmd_005frepair">body classes cmd_repair</a>
<li><a href="#body-classes-enumerate">body classes enumerate</a>
<li><a href="#body-classes-if_005felse">body classes if_else</a>
<li><a href="#body-classes-if_005fnotkept">body classes if_notkept</a>
<li><a href="#body-classes-if_005fok">body classes if_ok</a>
<li><a href="#body-classes-if_005frepaired">body classes if_repaired</a>
<li><a href="#body-classes-state_005frepaired">body classes state_repaired</a>
<li><a href="#body-contain-in_005fdir">body contain in_dir</a>
<li><a href="#body-contain-in_005fdir_005fshell">body contain in_dir_shell</a>
<li><a href="#body-contain-in_005fshell">body contain in_shell</a>
<li><a href="#body-contain-in_005fshell_005fand_005fsilent">body contain in_shell_and_silent</a>
<li><a href="#body-contain-in_005fshell_005fbg">body contain in_shell_bg</a>
<li><a href="#body-contain-jail">body contain jail</a>
<li><a href="#body-contain-setuid">body contain setuid</a>
<li><a href="#body-contain-setuid_005fsh">body contain setuid_sh</a>
<li><a href="#body-contain-setuidgid_005fsh">body contain setuidgid_sh</a>
<li><a href="#body-contain-silent">body contain silent</a>
<li><a href="#body-contain-silent_005fin_005fdir">body contain silent_in_dir</a>
<li><a href="#body-copy_005ffrom-backup_005flocal_005fcp">body copy_from backup_local_cp</a>
<li><a href="#body-copy_005ffrom-local_005fcp">body copy_from local_cp</a>
<li><a href="#body-copy_005ffrom-local_005fdcp">body copy_from local_dcp</a>
<li><a href="#body-copy_005ffrom-no_005fbackup_005fcp">body copy_from no_backup_cp</a>
<li><a href="#body-copy_005ffrom-no_005fbackup_005fdcp">body copy_from no_backup_dcp</a>
<li><a href="#body-copy_005ffrom-no_005fbackup_005frcp">body copy_from no_backup_rcp</a>
<li><a href="#body-copy_005ffrom-perms_005fcp">body copy_from perms_cp</a>
<li><a href="#body-copy_005ffrom-remote_005fcp">body copy_from remote_cp</a>
<li><a href="#body-copy_005ffrom-remote_005fdcp">body copy_from remote_dcp</a>
<li><a href="#body-copy_005ffrom-secure_005fcp">body copy_from secure_cp</a>
<li><a href="#body-copy_005ffrom-seed_005fcp">body copy_from seed_cp</a>
<li><a href="#body-copy_005ffrom-sync_005fcp">body copy_from sync_cp</a>
<li><a href="#body-delete-tidy">body delete tidy</a>
<li><a href="#body-depth_005fsearch-include_005fbase">body depth_search include_base</a>
<li><a href="#body-depth_005fsearch-recurse">body depth_search recurse</a>
<li><a href="#body-depth_005fsearch-recurse_005fignore">body depth_search recurse_ignore</a>
<li><a href="#body-edit_005fdefaults-empty">body edit_defaults empty</a>
<li><a href="#body-edit_005fdefaults-no_005fbackup">body edit_defaults no_backup</a>
<li><a href="#body-edit_005fdefaults-std_005fdefs">body edit_defaults std_defs</a>
<li><a href="#body-edit_005ffield-col">body edit_field col</a>
<li><a href="#body-edit_005ffield-line">body edit_field line</a>
<li><a href="#body-edit_005ffield-quoted_005fvar">body edit_field quoted_var</a>
<li><a href="#body-file_005fselect-by_005fname">body file_select by_name</a>
<li><a href="#body-file_005fselect-days_005fold">body file_select days_old</a>
<li><a href="#body-file_005fselect-dirs">body file_select dirs</a>
<li><a href="#body-file_005fselect-ex_005flist">body file_select ex_list</a>
<li><a href="#body-file_005fselect-exclude">body file_select exclude</a>
<li><a href="#body-file_005fselect-name_005fage">body file_select name_age</a>
<li><a href="#body-file_005fselect-plain">body file_select plain</a>
<li><a href="#body-file_005fselect-size_005frange">body file_select size_range</a>
<li><a href="#body-link_005ffrom-linkchildren">body link_from linkchildren</a>
<li><a href="#body-link_005ffrom-ln_005fs">body link_from ln_s</a>
<li><a href="#body-location-after">body location after</a>
<li><a href="#body-location-start">body location start</a>
<li><a href="#body-match_005fvalue-scan_005fchanging_005ffile">body match_value scan_changing_file</a>
<li><a href="#body-match_005fvalue-scan_005flog">body match_value scan_log</a>
<li><a href="#body-mount-nfs">body mount nfs</a>
<li><a href="#body-mount-nfs_005fp">body mount nfs_p</a>
<li><a href="#body-mount-unmount">body mount unmount</a>
<li><a href="#body-package_005fmethod-apt">body package_method apt</a>
<li><a href="#body-package_005fmethod-dpkg_005fversion">body package_method dpkg_version</a>
<li><a href="#body-package_005fmethod-freebsd">body package_method freebsd</a>
<li><a href="#body-package_005fmethod-generic">body package_method generic</a>
<li><a href="#body-package_005fmethod-msi_005fexplicit">body package_method msi_explicit</a>
<li><a href="#body-package_005fmethod-msi_005fimplicit">body package_method msi_implicit</a>
<li><a href="#body-package_005fmethod-rpm_005fversion">body package_method rpm_version</a>
<li><a href="#body-package_005fmethod-solaris">body package_method solaris </a>
<li><a href="#body-package_005fmethod-yum">body package_method yum</a>
<li><a href="#body-package_005fmethod-yum_005frpm">body package_method yum_rpm</a>
<li><a href="#body-package_005fmethod-zypper">body package_method zypper</a>
<li><a href="#body-perms-m">body perms m</a>
<li><a href="#body-perms-mo">body perms mo</a>
<li><a href="#body-perms-mog">body perms mog</a>
<li><a href="#body-perms-og">body perms og</a>
<li><a href="#body-perms-owner">body perms owner</a>
<li><a href="#body-process_005fcount-any_005fcount">body process_count any_count</a>
<li><a href="#body-process_005fcount-check_005frange">body process_count check_range</a>
<li><a href="#body-process_005fselect-days_005folder_005fthan">body process_select days_older_than</a>
<li><a href="#body-process_005fselect-exclude_005fprocs">body process_select exclude_procs</a>
<li><a href="#body-rename-disable">body rename disable</a>
<li><a href="#body-rename-rotate">body rename rotate</a>
<li><a href="#body-rename-to">body rename to</a>
<li><a href="#body-replace_005fwith-comment">body replace_with comment</a>
<li><a href="#body-replace_005fwith-uncomment">body replace_with uncomment</a>
<li><a href="#body-replace_005fwith-value">body replace_with value</a>
<li><a href="#body-select_005fregion-INI_005fsection">body select_region INI_section</a>
<li><a href="#body-service_005fmethod-bootstart">body service_method bootstart</a>
<li><a href="#body-service_005fmethod-force_005fdeps">body service_method force_deps</a>
<li><a href="#body-volume-min_005ffree_005fspace">body volume min_free_space</a>
<li><a href="#bundle-agent-cronjob">bundle agent cronjob</a>
<li><a href="#bundle-edit_005fline-append_005fgroups_005fstarting">bundle edit_line append_groups_starting</a>
<li><a href="#bundle-edit_005fline-append_005fif_005fno_005fline">bundle edit_line append_if_no_line</a>
<li><a href="#bundle-edit_005fline-append_005fif_005fno_005flines">bundle edit_line append_if_no_lines</a>
<li><a href="#bundle-edit_005fline-append_005fto_005fline_005fend">bundle edit_line append_to_line_end</a>
<li><a href="#bundle-edit_005fline-append_005fuser_005ffield">bundle edit_line append_user_field</a>
<li><a href="#bundle-edit_005fline-append_005fusers_005fstarting">bundle edit_line append_users_starting</a>
<li><a href="#bundle-edit_005fline-comment_005flines_005fcontaining">bundle edit_line comment_lines_containing</a>
<li><a href="#bundle-edit_005fline-comment_005flines_005fmatching">bundle edit_line comment_lines_matching</a>
<li><a href="#bundle-edit_005fline-create_005fsolaris_005fadmin_005ffile">bundle edit_line create_solaris_admin_file</a>
<li><a href="#bundle-edit_005fline-delete_005flines_005fmatching">bundle edit_line delete_lines_matching</a>
<li><a href="#bundle-edit_005fline-expand_005ftemplate">bundle edit_line expand_template</a>
<li><a href="#bundle-edit_005fline-insert_005ffile">bundle edit_line insert_file</a>
<li><a href="#bundle-edit_005fline-insert_005flines">bundle edit_line insert_lines</a>
<li><a href="#bundle-edit_005fline-replace_005fline_005fend">bundle edit_line replace_line_end</a>
<li><a href="#bundle-edit_005fline-replace_005for_005fadd">bundle edit_line replace_or_add</a>
<li><a href="#bundle-edit_005fline-resolvconf">bundle edit_line resolvconf</a>
<li><a href="#bundle-edit_005fline-set_005fconfig_005fvalues">bundle edit_line set_config_values</a>
<li><a href="#bundle-edit_005fline-set_005fuser_005ffield">bundle edit_line set_user_field</a>
<li><a href="#bundle-edit_005fline-set_005fvariable_005fvalues">bundle edit_line set_variable_values</a>
<li><a href="#bundle-edit_005fline-set_005fvariable_005fvalues2">bundle edit_line set_variable_values2</a>
<li><a href="#bundle-edit_005fline-uncomment_005flines_005fcontaining">bundle edit_line uncomment_lines_containing</a>
<li><a href="#bundle-edit_005fline-uncomment_005flines_005fmatching">bundle edit_line uncomment_lines_matching</a>
<li><a href="#bundle-edit_005fline-warn_005flines_005fmatching">bundle edit_line warn_lines_matching</a>
</ul>

<div class="node">
<a name="body-acl-access_generic"></a>
<a name="body-acl-access_005fgeneric"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-acl-ntfs">body acl ntfs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.1 body acl access_generic(acl)</h3>

<pre class="verbatim">body acl access_generic(acl)
# default/inherited ACLs are left unchanged,
# applicable for both files and directories on all platforms
{
acl_method => "overwrite";
aces => { "@(acl)" };

windows::
acl_type => "ntfs";

!windows::
acl_type => "posix";
}


</pre>

<div class="node">
<a name="body-acl-ntfs"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-acl-strict">body acl strict</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-acl-access_005fgeneric">body acl access_generic</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.2 body acl ntfs(acl)</h3>

<pre class="verbatim">body acl ntfs(acl)
{
acl_type => "ntfs";
acl_method => "overwrite";
aces => { "@(acl)" };
}


</pre>

<div class="node">
<a name="body-acl-strict"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-action-bg">body action bg</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-acl-ntfs">body acl ntfs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.3 body acl strict</h3>

<pre class="verbatim">body acl strict
# NOTE: May need to take ownership of file/dir
# to be sure no-one else is allowed access
{
acl_method => "overwrite";

windows::
aces => { "user:Administrator:rwx" };
!windows::
aces => { "user:root:rwx" };
}


</pre>

<div class="node">
<a name="body-action-bg"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-action-if_005felapsed">body action if_elapsed</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-acl-strict">body acl strict</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.4 body action bg(elapsed,expire)</h3>

<pre class="verbatim">body action bg(elapsed,expire)
{
ifelapsed   => "$(elapsed)";
expireafter => "$(expire)";
background  => "true";
}


</pre>

<div class="node">
<a name="body-action-if_elapsed"></a>
<a name="body-action-if_005felapsed"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-action-ifwin_005fbg">body action ifwin_bg</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-action-bg">body action bg</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.5 body action if_elapsed(x)</h3>

<pre class="verbatim">body action if_elapsed(x)
{
ifelapsed => "$(x)";
expireafter => "$(x)";
}


</pre>

<div class="node">
<a name="body-action-ifwin_bg"></a>
<a name="body-action-ifwin_005fbg"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-action-immediate">body action immediate</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-action-if_005felapsed">body action if_elapsed</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.6 body action ifwin_bg</h3>

<pre class="verbatim">body action ifwin_bg
{
windows::
background => "true";
}


</pre>

<div class="node">
<a name="body-action-immediate"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-action-log_005frepaired">body action log_repaired</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-action-ifwin_005fbg">body action ifwin_bg</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.7 body action immediate</h3>

<pre class="verbatim">body action immediate
{
ifelapsed => "0";
}


</pre>

<div class="node">
<a name="body-action-log_repaired"></a>
<a name="body-action-log_005frepaired"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-action-log_005fverbose">body action log_verbose</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-action-immediate">body action immediate</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.8 body action log_repaired(log,message)</h3>

<pre class="verbatim">body action log_repaired(log,message)
{
log_string => "$(sys.date), $(message)";
log_repaired => "$(log)";
}


</pre>

<div class="node">
<a name="body-action-log_verbose"></a>
<a name="body-action-log_005fverbose"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-action-measure_005fperformance">body action measure_performance</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-action-log_005frepaired">body action log_repaired</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.9 body action log_verbose</h3>

<pre class="verbatim">body action log_verbose
{
log_level => "verbose";
}


</pre>

<div class="node">
<a name="body-action-measure_performance"></a>
<a name="body-action-measure_005fperformance"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-action-policy">body action policy</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-action-log_005fverbose">body action log_verbose</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.10 body action measure_performance(x)</h3>

<pre class="verbatim">body action measure_performance(x)
{
measurement_class => "Detect changes in $(this.promiser)";
ifelapsed => "$(x)";
expireafter => "$(x)";
}


</pre>

<div class="node">
<a name="body-action-policy"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-action-sample_005frate">body action sample_rate</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-action-measure_005fperformance">body action measure_performance</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.11 body action policy(p)</h3>

<pre class="verbatim">body action policy(p)
{
action_policy => "$(p)";
}


# Log a message to log=[/file|stdout]

</pre>

<div class="node">
<a name="body-action-sample_rate"></a>
<a name="body-action-sample_005frate"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-action-warn_005fonly">body action warn_only</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-action-policy">body action policy</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.12 body action sample_rate(x)</h3>

<pre class="verbatim">body action sample_rate(x)
{
ifelapsed => "$(x)";
expireafter => "10";
}
</pre>

<div class="node">
<a name="body-action-warn_only"></a>
<a name="body-action-warn_005fonly"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-changes-detect_005fall_005fchange">body changes detect_all_change</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-action-sample_005frate">body action sample_rate</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.13 body action warn_only</h3>

<pre class="verbatim">body action warn_only
{
action_policy => "warn";
ifelapsed => "60";
}


</pre>

<div class="node">
<a name="body-changes-detect_all_change"></a>
<a name="body-changes-detect_005fall_005fchange"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-changes-detect_005fcontent">body changes detect_content</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-action-warn_005fonly">body action warn_only</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.14 body changes detect_all_change</h3>

<pre class="verbatim">body changes detect_all_change

# This is fierce, and will cost disk cycles

{
hash           => "best";
report_changes => "all";
update_hashes  => "yes";
}


</pre>

<div class="node">
<a name="body-changes-detect_content"></a>
<a name="body-changes-detect_005fcontent"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-changes-diff">body changes diff</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-changes-detect_005fall_005fchange">body changes detect_all_change</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.15 body changes detect_content</h3>

<pre class="verbatim">body changes detect_content

# This is a cheaper alternative

{
hash           => "md5";
report_changes => "content";
update_hashes  => "yes";
}


</pre>

<div class="node">
<a name="body-changes-diff"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-changes-diff_005fnoupdate">body changes diff_noupdate</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-changes-detect_005fcontent">body changes detect_content</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.16 body changes diff</h3>

<pre class="verbatim">body changes diff
# Generates diff report (Nova and above)
{
hash           => "sha256";
report_changes => "content";
report_diffs   => "true";
update_hashes  => "yes";
}


</pre>

<div class="node">
<a name="body-changes-diff_noupdate"></a>
<a name="body-changes-diff_005fnoupdate"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-changes-noupdate">body changes noupdate</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-changes-diff">body changes diff</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.17 body changes diff_noupdate</h3>

<pre class="verbatim">body changes diff_noupdate
{
hash           => "sha256";
report_changes => "content";
report_diffs   => "true";
update_hashes  => "no";
}


</pre>

<div class="node">
<a name="body-changes-noupdate"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-classes-always">body classes always</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-changes-diff_005fnoupdate">body changes diff_noupdate</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.18 body changes noupdate</h3>

<pre class="verbatim">body changes noupdate
# Use on (small) files that should never change
{
hash           => "sha256";
report_changes => "content";
update_hashes  => "no";
}


</pre>

<div class="node">
<a name="body-classes-always"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-classes-cf2_005fif_005felse">body classes cf2_if_else</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-changes-noupdate">body changes noupdate</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.19 body classes always(x)</h3>

<pre class="verbatim">body classes always(x)

# Define a class no matter what the outcome of the promise is

{
  promise_repaired => { "$(x)" };
  promise_kept => { "$(x)" };
  repair_failed => { "$(x)" };
  repair_denied => { "$(x)" };
  repair_timeout => { "$(x)" };
}

# agent bundles




</pre>

<div class="node">
<a name="body-classes-cf2_if_else"></a>
<a name="body-classes-cf2_005fif_005felse"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-classes-cmd_005frepair">body classes cmd_repair</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-classes-always">body classes always</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.20 body classes cf2_if_else(yes,no)</h3>

<pre class="verbatim">body classes cf2_if_else(yes,no)

# meant to match cf2 semantics

{
promise_repaired => { "$(yes)" };
repair_failed    => { "$(no)" };
repair_denied    => { "$(no)" };
repair_timeout   => { "$(no)" };
}


</pre>

<div class="node">
<a name="body-classes-cmd_repair"></a>
<a name="body-classes-cmd_005frepair"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-classes-enumerate">body classes enumerate</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-classes-cf2_005fif_005felse">body classes cf2_if_else</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.21 body classes cmd_repair(code,cl)</h3>

<pre class="verbatim">body classes cmd_repair(code,cl)
{
repaired_returncodes => { "$(code)" };
promise_repaired => { "$(cl)" };
}


</pre>

<div class="node">
<a name="body-classes-enumerate"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-classes-if_005felse">body classes if_else</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-classes-cmd_005frepair">body classes cmd_repair</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.22 body classes enumerate(x)</h3>

<pre class="verbatim">body classes enumerate(x)

#
# This is used by commercial editions to count 
# instances of jobs in a cluster
#

{
promise_repaired => { "mXC_$(x)" };
promise_kept => { "mXC_$(x)" };
persist_time => "15";
}


</pre>

<div class="node">
<a name="body-classes-if_else"></a>
<a name="body-classes-if_005felse"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-classes-if_005fnotkept">body classes if_notkept</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-classes-enumerate">body classes enumerate</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.23 body classes if_else(yes,no)</h3>

<pre class="verbatim">body classes if_else(yes,no)

{
promise_kept     => { "$(yes)" };
promise_repaired => { "$(yes)" };
repair_failed    => { "$(no)" };
repair_denied    => { "$(no)" };
repair_timeout   => { "$(no)" };
}


</pre>

<div class="node">
<a name="body-classes-if_notkept"></a>
<a name="body-classes-if_005fnotkept"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-classes-if_005fok">body classes if_ok</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-classes-if_005felse">body classes if_else</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.24 body classes if_notkept(x)</h3>

<pre class="verbatim">body classes if_notkept(x)
{
repair_failed   => { "$(x)" };
repair_denied   => { "$(x)" };
repair_timeout  => { "$(x)" };
}


</pre>

<div class="node">
<a name="body-classes-if_ok"></a>
<a name="body-classes-if_005fok"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-classes-if_005frepaired">body classes if_repaired</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-classes-if_005fnotkept">body classes if_notkept</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.25 body classes if_ok(x)</h3>

<pre class="verbatim">body classes if_ok(x)
{
promise_repaired => { "$(x)" };
promise_kept => { "$(x)" };
}


</pre>

<div class="node">
<a name="body-classes-if_repaired"></a>
<a name="body-classes-if_005frepaired"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-classes-state_005frepaired">body classes state_repaired</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-classes-if_005fok">body classes if_ok</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.26 body classes if_repaired(x)</h3>

<pre class="verbatim">body classes if_repaired(x)
{
promise_repaired => { "$(x)" };
}


</pre>

<div class="node">
<a name="body-classes-state_repaired"></a>
<a name="body-classes-state_005frepaired"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-contain-in_005fdir">body contain in_dir</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-classes-if_005frepaired">body classes if_repaired</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.27 body classes state_repaired(x)</h3>

<pre class="verbatim">body classes state_repaired(x)
{
promise_repaired => { "$(x)" };
persist_time => "10";
}


</pre>

<div class="node">
<a name="body-contain-in_dir"></a>
<a name="body-contain-in_005fdir"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-contain-in_005fdir_005fshell">body contain in_dir_shell</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-classes-state_005frepaired">body classes state_repaired</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.28 body contain in_dir(s)</h3>

<pre class="verbatim">body contain in_dir(s)
{
chdir => "$(s)";
}


</pre>

<div class="node">
<a name="body-contain-in_dir_shell"></a>
<a name="body-contain-in_005fdir_005fshell"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-contain-in_005fshell">body contain in_shell</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-contain-in_005fdir">body contain in_dir</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.29 body contain in_dir_shell(s)</h3>

<pre class="verbatim">body contain in_dir_shell(s)
{
chdir => "$(s)";
useshell => "true";
}


</pre>

<div class="node">
<a name="body-contain-in_shell"></a>
<a name="body-contain-in_005fshell"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-contain-in_005fshell_005fand_005fsilent">body contain in_shell_and_silent</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-contain-in_005fdir_005fshell">body contain in_dir_shell</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.30 body contain in_shell</h3>

<pre class="verbatim">body contain in_shell
{
useshell => "true";
}


</pre>

<div class="node">
<a name="body-contain-in_shell_and_silent"></a>
<a name="body-contain-in_005fshell_005fand_005fsilent"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-contain-in_005fshell_005fbg">body contain in_shell_bg</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-contain-in_005fshell">body contain in_shell</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.31 body contain in_shell_and_silent</h3>

<pre class="verbatim">body contain in_shell_and_silent
{
useshell => "true";
no_output => "true";
}


</pre>

<div class="node">
<a name="body-contain-in_shell_bg"></a>
<a name="body-contain-in_005fshell_005fbg"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-contain-jail">body contain jail</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-contain-in_005fshell_005fand_005fsilent">body contain in_shell_and_silent</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.32 body contain in_shell_bg</h3>

<pre class="verbatim">body contain in_shell_bg
{
useshell => "true";
background => "true";
}


</pre>

<div class="node">
<a name="body-contain-jail"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-contain-setuid">body contain setuid</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-contain-in_005fshell_005fbg">body contain in_shell_bg</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.33 body contain jail(owner,root,dir)</h3>

<pre class="verbatim">body contain jail(owner,root,dir)
{
exec_owner => "$(owner)";
useshell => "true";
chdir => "$(dir)";
chroot => "$(root)";
}




</pre>

<div class="node">
<a name="body-contain-setuid"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-contain-setuid_005fsh">body contain setuid_sh</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-contain-jail">body contain jail</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.34 body contain setuid(x)</h3>

<pre class="verbatim">body contain setuid(x)
{
exec_owner => "$(x)";
useshell => "false";
}


</pre>

<div class="node">
<a name="body-contain-setuid_sh"></a>
<a name="body-contain-setuid_005fsh"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-contain-setuidgid_005fsh">body contain setuidgid_sh</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-contain-setuid">body contain setuid</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.35 body contain setuid_sh(x)</h3>

<pre class="verbatim">body contain setuid_sh(x)
{
exec_owner => "$(x)";
useshell => "true";
}


</pre>

<div class="node">
<a name="body-contain-setuidgid_sh"></a>
<a name="body-contain-setuidgid_005fsh"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-contain-silent">body contain silent</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-contain-setuid_005fsh">body contain setuid_sh</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.36 body contain setuidgid_sh(owner,group)</h3>

<pre class="verbatim">body contain setuidgid_sh(owner,group)
{
exec_owner => "$(owner)";
exec_group => "$(group)";
useshell => "true";
}


</pre>

<div class="node">
<a name="body-contain-silent"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-contain-silent_005fin_005fdir">body contain silent_in_dir</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-contain-setuidgid_005fsh">body contain setuidgid_sh</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.37 body contain silent</h3>

<pre class="verbatim">body contain silent
{
no_output => "true";
}


</pre>

<div class="node">
<a name="body-contain-silent_in_dir"></a>
<a name="body-contain-silent_005fin_005fdir"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-copy_005ffrom-backup_005flocal_005fcp">body copy_from backup_local_cp</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-contain-silent">body contain silent</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.38 body contain silent_in_dir(s)</h3>

<pre class="verbatim">body contain silent_in_dir(s)
{
chdir => "$(s)";
no_output => "true";
}


</pre>

<div class="node">
<a name="body-copy_from-backup_local_cp"></a>
<a name="body-copy_005ffrom-backup_005flocal_005fcp"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-copy_005ffrom-local_005fcp">body copy_from local_cp</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-contain-silent_005fin_005fdir">body contain silent_in_dir</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.39 body copy_from backup_local_cp(from)</h3>

<pre class="verbatim">body copy_from backup_local_cp(from)
# Local copy, keeping a backup of old versions
{
  source      => "$(from)";
  copy_backup => "timestamp";
}


# Copy only if the file does not already exist, i.e. seed the placement

</pre>

<div class="node">
<a name="body-copy_from-local_cp"></a>
<a name="body-copy_005ffrom-local_005fcp"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-copy_005ffrom-local_005fdcp">body copy_from local_dcp</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-copy_005ffrom-backup_005flocal_005fcp">body copy_from backup_local_cp</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.40 body copy_from local_cp(from)</h3>

<pre class="verbatim">body copy_from local_cp(from)
{
source      => "$(from)";
}


</pre>

<div class="node">
<a name="body-copy_from-local_dcp"></a>
<a name="body-copy_005ffrom-local_005fdcp"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-copy_005ffrom-no_005fbackup_005fcp">body copy_from no_backup_cp</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-copy_005ffrom-local_005fcp">body copy_from local_cp</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.41 body copy_from local_dcp(from)</h3>

<pre class="verbatim">body copy_from local_dcp(from)
{
source      => "$(from)";
compare     => "digest";
}


</pre>

<div class="node">
<a name="body-copy_from-no_backup_cp"></a>
<a name="body-copy_005ffrom-no_005fbackup_005fcp"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-copy_005ffrom-no_005fbackup_005fdcp">body copy_from no_backup_dcp</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-copy_005ffrom-local_005fdcp">body copy_from local_dcp</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.42 body copy_from no_backup_cp(from)</h3>

<pre class="verbatim">body copy_from no_backup_cp(from)
{
source      => "$(from)";
copy_backup => "false";
}


</pre>

<div class="node">
<a name="body-copy_from-no_backup_dcp"></a>
<a name="body-copy_005ffrom-no_005fbackup_005fdcp"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-copy_005ffrom-no_005fbackup_005frcp">body copy_from no_backup_rcp</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-copy_005ffrom-no_005fbackup_005fcp">body copy_from no_backup_cp</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.43 body copy_from no_backup_dcp(from)</h3>

<pre class="verbatim">body copy_from no_backup_dcp(from)
{
source      => "$(from)";
copy_backup => "false";
compare     => "digest";
}


</pre>

<div class="node">
<a name="body-copy_from-no_backup_rcp"></a>
<a name="body-copy_005ffrom-no_005fbackup_005frcp"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-copy_005ffrom-perms_005fcp">body copy_from perms_cp</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-copy_005ffrom-no_005fbackup_005fdcp">body copy_from no_backup_dcp</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.44 body copy_from no_backup_rcp(from,server)</h3>

<pre class="verbatim">body copy_from no_backup_rcp(from,server)
{
servers     => { "$(server)" };
source      => "$(from)";
compare     => "mtime";
copy_backup => "false";
}


</pre>

<div class="node">
<a name="body-copy_from-perms_cp"></a>
<a name="body-copy_005ffrom-perms_005fcp"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-copy_005ffrom-remote_005fcp">body copy_from remote_cp</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-copy_005ffrom-no_005fbackup_005frcp">body copy_from no_backup_rcp</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.45 body copy_from perms_cp(from)</h3>

<pre class="verbatim">body copy_from perms_cp(from)
{
source      => "$(from)";
preserve    => "true";
}

</pre>

<div class="node">
<a name="body-copy_from-remote_cp"></a>
<a name="body-copy_005ffrom-remote_005fcp"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-copy_005ffrom-remote_005fdcp">body copy_from remote_dcp</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-copy_005ffrom-perms_005fcp">body copy_from perms_cp</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.46 body copy_from remote_cp(from,server)</h3>

<pre class="verbatim">body copy_from remote_cp(from,server)
{
servers     => { "$(server)" };
source      => "$(from)";
compare     => "mtime";
}


</pre>

<div class="node">
<a name="body-copy_from-remote_dcp"></a>
<a name="body-copy_005ffrom-remote_005fdcp"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-copy_005ffrom-secure_005fcp">body copy_from secure_cp</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-copy_005ffrom-remote_005fcp">body copy_from remote_cp</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.47 body copy_from remote_dcp(from,server)</h3>

<pre class="verbatim">body copy_from remote_dcp(from,server)
{
servers     => { "$(server)" };
source      => "$(from)";
compare     => "digest";
}


</pre>

<div class="node">
<a name="body-copy_from-secure_cp"></a>
<a name="body-copy_005ffrom-secure_005fcp"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-copy_005ffrom-seed_005fcp">body copy_from seed_cp</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-copy_005ffrom-remote_005fdcp">body copy_from remote_dcp</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.48 body copy_from secure_cp(from,server)</h3>

<pre class="verbatim">body copy_from secure_cp(from,server)
{
source      => "$(from)";
servers     => { "$(server)" };
compare     => "digest";
encrypt     => "true";
verify      => "true";
}


</pre>

<div class="node">
<a name="body-copy_from-seed_cp"></a>
<a name="body-copy_005ffrom-seed_005fcp"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-copy_005ffrom-sync_005fcp">body copy_from sync_cp</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-copy_005ffrom-secure_005fcp">body copy_from secure_cp</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.49 body copy_from seed_cp(from)</h3>

<pre class="verbatim">body copy_from seed_cp(from)
{
source      => "$(from)";
compare     => "exists";
}


</pre>

<div class="node">
<a name="body-copy_from-sync_cp"></a>
<a name="body-copy_005ffrom-sync_005fcp"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-delete-tidy">body delete tidy</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-copy_005ffrom-seed_005fcp">body copy_from seed_cp</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.50 body copy_from sync_cp(from,server)</h3>

<pre class="verbatim">body copy_from sync_cp(from,server)
{
servers     => { "$(server)" };
source      => "$(from)";
purge       => "true";
preserve    => "true";
type_check  => "false";
}


</pre>

<div class="node">
<a name="body-delete-tidy"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-depth_005fsearch-include_005fbase">body depth_search include_base</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-copy_005ffrom-sync_005fcp">body copy_from sync_cp</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.51 body delete tidy</h3>

<pre class="verbatim">body delete tidy

{
dirlinks => "delete";
rmdirs   => "true";
}


</pre>

<div class="node">
<a name="body-depth_search-include_base"></a>
<a name="body-depth_005fsearch-include_005fbase"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-depth_005fsearch-recurse">body depth_search recurse</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-delete-tidy">body delete tidy</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.52 body depth_search include_base</h3>

<pre class="verbatim">body depth_search include_base
{
include_basedir => "true";
}


</pre>

<div class="node">
<a name="body-depth_search-recurse"></a>
<a name="body-depth_005fsearch-recurse"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-depth_005fsearch-recurse_005fignore">body depth_search recurse_ignore</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-depth_005fsearch-include_005fbase">body depth_search include_base</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.53 body depth_search recurse(d)</h3>

<pre class="verbatim">body depth_search recurse(d)

{
depth => "$(d)";
xdev  => "true";
}


</pre>

<div class="node">
<a name="body-depth_search-recurse_ignore"></a>
<a name="body-depth_005fsearch-recurse_005fignore"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-edit_005fdefaults-empty">body edit_defaults empty</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-depth_005fsearch-recurse">body depth_search recurse</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.54 body depth_search recurse_ignore(d,list)</h3>

<pre class="verbatim">body depth_search recurse_ignore(d,list)
{
depth => "$(d)";
exclude_dirs => { @(list) };
}


</pre>

<div class="node">
<a name="body-edit_defaults-empty"></a>
<a name="body-edit_005fdefaults-empty"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-edit_005fdefaults-no_005fbackup">body edit_defaults no_backup</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-depth_005fsearch-recurse_005fignore">body depth_search recurse_ignore</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.55 body edit_defaults empty</h3>

<pre class="verbatim">body edit_defaults empty
{
empty_file_before_editing => "true";
edit_backup => "false";
max_file_size => "300000";
}


</pre>

<div class="node">
<a name="body-edit_defaults-no_backup"></a>
<a name="body-edit_005fdefaults-no_005fbackup"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-edit_005fdefaults-std_005fdefs">body edit_defaults std_defs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-edit_005fdefaults-empty">body edit_defaults empty</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.56 body edit_defaults no_backup</h3>

<pre class="verbatim">body edit_defaults no_backup
{
edit_backup => "false";
}


</pre>

<div class="node">
<a name="body-edit_defaults-std_defs"></a>
<a name="body-edit_005fdefaults-std_005fdefs"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-edit_005ffield-col">body edit_field col</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-edit_005fdefaults-no_005fbackup">body edit_defaults no_backup</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.57 body edit_defaults std_defs</h3>

<pre class="verbatim">body edit_defaults std_defs
{
empty_file_before_editing => "false";
edit_backup => "false";
max_file_size => "300000";
}


</pre>

<div class="node">
<a name="body-edit_field-col"></a>
<a name="body-edit_005ffield-col"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-edit_005ffield-line">body edit_field line</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-edit_005fdefaults-std_005fdefs">body edit_defaults std_defs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.58 body edit_field col(split,col,newval,method)</h3>

<pre class="verbatim">body edit_field col(split,col,newval,method)
{
field_separator    => "$(split)";
select_field       => "$(col)";
value_separator    => ",";
field_value        => "$(newval)";
field_operation    => "$(method)";
extend_fields      => "true";
allow_blank_fields => "true";
}


</pre>

<div class="node">
<a name="body-edit_field-line"></a>
<a name="body-edit_005ffield-line"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-edit_005ffield-quoted_005fvar">body edit_field quoted_var</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-edit_005ffield-col">body edit_field col</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.59 body edit_field line(split,col,newval,method)</h3>

<pre class="verbatim">body edit_field line(split,col,newval,method)
{
field_separator    => "$(split)";
select_field       => "$(col)";
value_separator    => " ";
field_value        => "$(newval)";
field_operation    => "$(method)";
extend_fields      => "true";
allow_blank_fields => "true";
}


</pre>

<div class="node">
<a name="body-edit_field-quoted_var"></a>
<a name="body-edit_005ffield-quoted_005fvar"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-file_005fselect-by_005fname">body file_select by_name</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-edit_005ffield-line">body edit_field line</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.60 body edit_field quoted_var(newval,method)</h3>

<pre class="verbatim">body edit_field quoted_var(newval,method)
{
field_separator => "\"";
select_field    => "2";
value_separator  => " ";
field_value     => "$(newval)";
field_operation => "$(method)";
extend_fields => "false";
allow_blank_fields => "true";
}


</pre>

<div class="node">
<a name="body-file_select-by_name"></a>
<a name="body-file_005fselect-by_005fname"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-file_005fselect-days_005fold">body file_select days_old</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-edit_005ffield-quoted_005fvar">body edit_field quoted_var</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.61 body file_select by_name(names)</h3>

<pre class="verbatim">body file_select by_name(names)
{
leaf_name  => { @(names)};
file_result => "leaf_name";
}


</pre>

<div class="node">
<a name="body-file_select-days_old"></a>
<a name="body-file_005fselect-days_005fold"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-file_005fselect-dirs">body file_select dirs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-file_005fselect-by_005fname">body file_select by_name</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.62 body file_select days_old(days)</h3>

<pre class="verbatim">body file_select days_old(days)
{
mtime       => irange(0,ago(0,0,"$(days)",0,0,0));
file_result => "mtime";
}


</pre>

<div class="node">
<a name="body-file_select-dirs"></a>
<a name="body-file_005fselect-dirs"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-file_005fselect-ex_005flist">body file_select ex_list</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-file_005fselect-days_005fold">body file_select days_old</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.63 body file_select dirs</h3>

<pre class="verbatim">body file_select dirs
{
file_types  => { "dir" };
file_result => "file_types";
}


</pre>

<div class="node">
<a name="body-file_select-ex_list"></a>
<a name="body-file_005fselect-ex_005flist"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-file_005fselect-exclude">body file_select exclude</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-file_005fselect-dirs">body file_select dirs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.64 body file_select ex_list(names)</h3>

<pre class="verbatim">body file_select ex_list(names)
{
leaf_name  => { @(names)};
file_result => "!leaf_name";
}


</pre>

<div class="node">
<a name="body-file_select-exclude"></a>
<a name="body-file_005fselect-exclude"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-file_005fselect-name_005fage">body file_select name_age</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-file_005fselect-ex_005flist">body file_select ex_list</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.65 body file_select exclude(name)</h3>

<pre class="verbatim">body file_select exclude(name)
{
leaf_name  => { "$(name)"};
file_result => "!leaf_name";
}


</pre>

<div class="node">
<a name="body-file_select-name_age"></a>
<a name="body-file_005fselect-name_005fage"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-file_005fselect-plain">body file_select plain</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-file_005fselect-exclude">body file_select exclude</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.66 body file_select name_age(name,days)</h3>

<pre class="verbatim">body file_select name_age(name,days)
{
leaf_name   => { "$(name)" };
mtime       => irange(0,ago(0,0,"$(days)",0,0,0));  
file_result => "mtime.leaf_name"; 
}


</pre>

<div class="node">
<a name="body-file_select-plain"></a>
<a name="body-file_005fselect-plain"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-file_005fselect-size_005frange">body file_select size_range</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-file_005fselect-name_005fage">body file_select name_age</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.67 body file_select plain</h3>

<pre class="verbatim">body file_select plain
{
file_types  => { "plain" };
file_result => "file_types";
}

</pre>

<div class="node">
<a name="body-file_select-size_range"></a>
<a name="body-file_005fselect-size_005frange"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-link_005ffrom-linkchildren">body link_from linkchildren</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-file_005fselect-plain">body file_select plain</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.68 body file_select size_range(from,to)</h3>

<pre class="verbatim">body file_select size_range(from,to)
{
search_size => irange("$(from)","$(to)");
file_result => "size";
}


</pre>

<div class="node">
<a name="body-link_from-linkchildren"></a>
<a name="body-link_005ffrom-linkchildren"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-link_005ffrom-ln_005fs">body link_from ln_s</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-file_005fselect-size_005frange">body file_select size_range</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.69 body link_from linkchildren(tofile)</h3>

<pre class="verbatim">body link_from linkchildren(tofile)
{
source        => "$(tofile)";
link_type     => "symlink";
when_no_source  => "force";
link_children => "true";
when_linking_children => "if_no_such_file"; # "override_file";
}


</pre>

<div class="node">
<a name="body-link_from-ln_s"></a>
<a name="body-link_005ffrom-ln_005fs"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-location-after">body location after</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-link_005ffrom-linkchildren">body link_from linkchildren</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.70 body link_from ln_s(x)</h3>

<pre class="verbatim">body link_from ln_s(x)
{
link_type => "symlink";
source => "$(x)";
when_no_source => "force";
}


</pre>

<div class="node">
<a name="body-location-after"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-location-start">body location start</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-link_005ffrom-ln_005fs">body link_from ln_s</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.71 body location after(str)</h3>

<pre class="verbatim">body location after(str)
{
before_after => "after";
select_line_matching => "$(str)";
}



</pre>

<div class="node">
<a name="body-location-start"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-match_005fvalue-scan_005fchanging_005ffile">body match_value scan_changing_file</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-location-after">body location after</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.72 body location start</h3>

<pre class="verbatim">body location start
{
before_after => "before";
}


</pre>

<div class="node">
<a name="body-match_value-scan_changing_file"></a>
<a name="body-match_005fvalue-scan_005fchanging_005ffile"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-match_005fvalue-scan_005flog">body match_value scan_log</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-location-start">body location start</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.73 body match_value scan_changing_file(line)</h3>

<pre class="verbatim">body match_value scan_changing_file(line)
{
select_line_matching => "$(line)";
track_growing_file => "false";
}


</pre>

<div class="node">
<a name="body-match_value-scan_log"></a>
<a name="body-match_005fvalue-scan_005flog"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-mount-nfs">body mount nfs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-match_005fvalue-scan_005fchanging_005ffile">body match_value scan_changing_file</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.74 body match_value scan_log(line)</h3>

<pre class="verbatim">body match_value scan_log(line)
{
select_line_matching => "$(line)";
track_growing_file => "true";
}


</pre>

<div class="node">
<a name="body-mount-nfs"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-mount-nfs_005fp">body mount nfs_p</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-match_005fvalue-scan_005flog">body match_value scan_log</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.75 body mount nfs(server,source)</h3>

<pre class="verbatim">body mount nfs(server,source)
{
mount_type => "nfs";
mount_source => "$(source)";
mount_server => "$(server)";
edit_fstab => "true";
}



</pre>

<div class="node">
<a name="body-mount-nfs_p"></a>
<a name="body-mount-nfs_005fp"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-mount-unmount">body mount unmount</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-mount-nfs">body mount nfs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.76 body mount nfs_p(server,source,perm)</h3>

<pre class="verbatim">body mount nfs_p(server,source,perm)
{
mount_type => "nfs";
mount_source => "$(source)";
mount_server => "$(server)";
mount_options => {"$(perm)"};
edit_fstab => "true";
}


</pre>

<div class="node">
<a name="body-mount-unmount"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-package_005fmethod-apt">body package_method apt</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-mount-nfs_005fp">body mount nfs_p</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.77 body mount unmount</h3>

<pre class="verbatim">body mount unmount
{
mount_type => "nfs";
edit_fstab => "true";
unmount => "true";
}


</pre>

<div class="node">
<a name="body-package_method-apt"></a>
<a name="body-package_005fmethod-apt"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-package_005fmethod-dpkg_005fversion">body package_method dpkg_version</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-mount-unmount">body mount unmount</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.78 body package_method apt</h3>

<pre class="verbatim">body package_method apt
{
package_changes => "bulk";
package_list_command => "/usr/bin/dpkg -l";
package_list_name_regex    => "ii\s+([^\s]+).*";
package_list_version_regex => "ii\s+[^\s]+\s+([^\s]+).*";
package_installed_regex => ".*"; # all reported are installed
package_name_convention => "$(name)";

# set it to "0" to avoid caching of list during upgrade
package_list_update_ifelapsed => "240";

have_aptitude::
   package_add_command => "/usr/bin/env DEBIAN_FRONTEND=noninteractive LC_ALL=C /usr/bin/aptitude -o Dpkg::Options::=--force-confold -o Dpkg::Options::=--force-confdef --assume-yes install";
   package_list_update_command => "/usr/bin/aptitude update";
   package_delete_command => "/usr/bin/env DEBIAN_FRONTEND=noninteractive LC_ALL=C /usr/bin/aptitude -o Dpkg::Options::=--force-confold -o Dpkg::Options::=--force-confdef --assume-yes -q remove";
   package_update_command =>  "/usr/bin/env DEBIAN_FRONTEND=noninteractive LC_ALL=C /usr/bin/aptitude -o Dpkg::Options::=--force-confold -o Dpkg::Options::=--force-confdef --assume-yes install";
   package_verify_command =>  "/usr/bin/aptitude show";
   package_noverify_regex => "(State: not installed|E: Unable to locate package .*)";

!have_aptitude::
   package_add_command => "/usr/bin/env DEBIAN_FRONTEND=noninteractive LC_ALL=C /usr/bin/apt-get -o Dpkg::Options::=--force-confold -o Dpkg::Options::=--force-confdef --yes install";
   package_list_update_command => "/usr/bin/apt-get update";
   package_delete_command => "/usr/bin/env DEBIAN_FRONTEND=noninteractive LC_ALL=C /usr/bin/apt-get -o Dpkg::Options::=--force-confold -o Dpkg::Options::=--force-confdef --yes -q remove";
   package_update_command =>  "/usr/bin/env DEBIAN_FRONTEND=noninteractive LC_ALL=C /usr/bin/apt-get -o Dpkg::Options::=--force-confold -o Dpkg::Options::=--force-confdef --yes install";
   package_verify_command => "/usr/bin/dpkg -s";
   package_noverify_returncode => "1";
}


</pre>

<div class="node">
<a name="body-package_method-dpkg_version"></a>
<a name="body-package_005fmethod-dpkg_005fversion"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-package_005fmethod-freebsd">body package_method freebsd</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-package_005fmethod-apt">body package_method apt</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.79 body package_method dpkg_version(repo)</h3>

<pre class="verbatim">body package_method dpkg_version(repo)
{
package_changes => "individual";
package_list_command => "/usr/bin/dpkg -l";

# set it to "0" to avoid caching of list during upgrade
package_list_update_ifelapsed => "240";

package_list_name_regex    => "ii\s+([^\s]+).*";
package_list_version_regex => "ii\s+[^\s]+\s+([^\s]+).*";

package_installed_regex => ".*"; # all reported are installed

package_file_repositories => { "$(repo)" };

debian.x86_64::
   package_name_convention => "$(name)_$(version)_amd64.deb";

debian.i686::
   package_name_convention => "$(name)_$(version)_i386.deb";

debian::
   package_add_command => "/usr/bin/dpkg --install";
   package_delete_command => "/usr/bin/dpkg --purge";
   package_update_command =>  "/usr/bin/dpkg --install";
}


</pre>

<div class="node">
<a name="body-package_method-freebsd"></a>
<a name="body-package_005fmethod-freebsd"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-package_005fmethod-generic">body package_method generic</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-package_005fmethod-dpkg_005fversion">body package_method dpkg_version</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.80 body package_method freebsd</h3>

<pre class="verbatim">body package_method freebsd
{
 package_changes => "individual";

 # Could use rpm for this
 package_list_command => "/usr/sbin/pkg_info";

 # Remember to escape special characters like |

 package_list_name_regex    => "([^\s]+)-.*";
 package_list_version_regex => "[^\s]+-([^\s]+).*";

 package_name_regex    => "([^\s]+)-.*";
 package_version_regex => "[^\s]+-([^\s]+).*";

 package_installed_regex => ".*";

 package_name_convention => "$(name)-$(version)";


package_add_command => "/usr/sbin/pkg_add -r";
package_delete_command => "/usr/sbin/pkg_delete";
}


 # Single bundle for all the similar managers simplifies promises

</pre>

<div class="node">
<a name="body-package_method-generic"></a>
<a name="body-package_005fmethod-generic"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-package_005fmethod-msi_005fexplicit">body package_method msi_explicit</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-package_005fmethod-freebsd">body package_method freebsd</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.81 body package_method generic</h3>

<pre class="verbatim">body package_method generic
{
SuSE::
 package_changes => "bulk";
 package_list_command => "/usr/bin/zypper packages";
 package_patch_list_command => "/usr/bin/zypper patches";
 package_installed_regex => "i.*";
 package_list_name_regex    => "[^|]+\|[^|]+\|\s+([^\s]+).*";
 package_list_version_regex => "[^|]+\|[^|]+\|[^|]+\|\s+([^\s]+).*";
 package_list_arch_regex    => "[^|]+\|[^|]+\|[^|]+\|[^|]+\|\s+([^\s]+).*";
 package_patch_installed_regex => ".*Installed.*|.*Not Applicable.*";
 package_patch_name_regex    => "[^|]+\|\s+([^\s]+).*";
 package_patch_version_regex => "[^|]+\|[^|]+\|\s+([^\s]+).*";
 package_name_convention => "$(name)";
 package_add_command => "/usr/bin/zypper --non-interactive install";
 package_delete_command => "/usr/bin/zypper --non-interactive remove --force-resolution";
 package_update_command => "/usr/bin/zypper --non-interactive update";
 package_patch_command => "/usr/bin/zypper --non-interactive patch$"; # $ means no args
 package_verify_command => "/usr/bin/zypper --non-interactive verify$";

redhat::
 package_changes => "bulk";
 package_list_command => "/bin/rpm -qa --qf '%{name} %{version}-%{release} %{arch}\n'";
 package_patch_list_command => "/usr/bin/yum check-update";
 package_list_name_regex    => "^(\S+?)\s\S+?\s\S+$";
 package_list_version_regex => "^\S+?\s(\S+?)\s\S+$";
 package_list_arch_regex    => "^\S+?\s\S+?\s(\S+)$";
 package_installed_regex => ".*";
 package_name_convention => "$(name)";
 package_list_update_ifelapsed => "0";     # sometimes, caching is pretty disturbing
 package_patch_installed_regex => "^\s.*";
 package_patch_name_regex    => "([^.]+).*";
 package_patch_version_regex => "[^\s]\s+([^\s]+).*";
 package_patch_arch_regex    => "[^.]+\.([^\s]+).*";
 package_add_command    => "/usr/bin/yum -y install";
 package_update_command => "/usr/bin/yum -y update";
 package_delete_command => "/bin/rpm -e --nodeps --allmatches";
 package_verify_command => "/bin/rpm -V";

# package_changes => "bulk";
# package_list_command => "/usr/bin/yum list installed";
# package_patch_list_command => "/usr/bin/yum check-update";
# package_list_name_regex    => "([^.]+).*";
# package_list_version_regex => "[^\s]\s+([^\s]+).*";
# package_list_arch_regex    => "[^.]+\.([^\s]+).*";
# package_installed_regex => ".*(installed|\s+@).*";
# package_name_convention => "$(name).$(arch)";
# package_list_update_ifelapsed => "240";
# package_patch_installed_regex => "^\s.*";
# package_patch_name_regex    => "([^.]+).*";
# package_patch_version_regex => "[^\s]\s+([^\s]+).*";
# package_patch_arch_regex    => "[^.]+\.([^\s]+).*";
# package_add_command => "/usr/bin/yum -y install";
# package_delete_command => "/bin/rpm -e --nodeps";
# package_verify_command => "/bin/rpm -V";

debian::
 package_changes => "bulk";
 package_list_command => "/usr/bin/dpkg -l";
 package_list_name_regex    => "ii\s+([^\s]+).*";
 package_list_version_regex => "ii\s+[^\s]+\s+([^\s]+).*";
 package_installed_regex => ".*"; # all reported are installed
 package_name_convention => "$(name)";
 package_list_update_ifelapsed => "240";		# 4 hours

debian.have_aptitude::
   package_add_command => "/usr/bin/env DEBIAN_FRONTEND=noninteractive LC_ALL=C /usr/bin/aptitude -o Dpkg::Options::=--force-confold -o Dpkg::Options::=--force-confdef --assume-yes install";
   package_list_update_command => "/usr/bin/aptitude update";
   package_delete_command => "/usr/bin/env DEBIAN_FRONTEND=noninteractive LC_ALL=C /usr/bin/aptitude -o Dpkg::Options::=--force-confold -o Dpkg::Options::=--force-confdef --assume-yes remove";
   package_update_command =>  "/usr/bin/env DEBIAN_FRONTEND=noninteractive LC_ALL=C /usr/bin/aptitude -o Dpkg::Options::=--force-confold -o Dpkg::Options::=--force-confdef --assume-yes install";
   package_verify_command =>  "/usr/bin/aptitude show";
   package_noverify_regex => "(State: not installed|E: Unable to locate package .*)";

debian.!have_aptitude::
   package_add_command => "/usr/bin/env DEBIAN_FRONTEND=noninteractive LC_ALL=C /usr/bin/apt-get -o Dpkg::Options::=--force-confold -o Dpkg::Options::=--force-confdef --yes install";
   package_list_update_command => "/usr/bin/apt-get update";
   package_delete_command => "/usr/bin/env DEBIAN_FRONTEND=noninteractive LC_ALL=C /usr/bin/apt-get -o Dpkg::Options::=--force-confold -o Dpkg::Options::=--force-confdef --yes remove";
   package_update_command =>  "/usr/bin/env DEBIAN_FRONTEND=noninteractive LC_ALL=C /usr/bin/apt-get -o Dpkg::Options::=--force-confold -o Dpkg::Options::=--force-confdef --yes install";
   package_verify_command => "/usr/bin/dpkg -s";
   package_noverify_returncode => "1";

freebsd::
 package_changes => "individual";
 package_list_command => "/usr/sbin/pkg_info";
 package_list_name_regex    => "([^\s]+)-.*";
 package_list_version_regex => "[^\s]+-([^\s]+).*";
 package_name_regex    => "([^\s]+)-.*";
 package_version_regex => "[^\s]+-([^\s]+).*";
 package_installed_regex => ".*";
 package_name_convention => "$(name)-$(version)";
 package_add_command => "/usr/sbin/pkg_add -r";
 package_delete_command => "/usr/sbin/pkg_delete";
}



</pre>

<div class="node">
<a name="body-package_method-msi_explicit"></a>
<a name="body-package_005fmethod-msi_005fexplicit"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-package_005fmethod-msi_005fimplicit">body package_method msi_implicit</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-package_005fmethod-generic">body package_method generic</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.82 body package_method msi_explicit(repo)</h3>

<pre class="verbatim">body package_method msi_explicit(repo)
# use software name as promiser, e.g. "7-Zip", and explicitly
# specify any package_version and package_arch
{
package_changes => "individual";
package_file_repositories => { "$(repo)" };

package_installed_regex => ".*";
 
package_name_convention => "$(name)-$(version)-$(arch).msi";
package_delete_convention => "$(firstrepo)$(name)-$(version)-$(arch).msi";

package_add_command => "\"$(sys.winsysdir)\msiexec.exe\" /qn /i";
package_update_command => "\"$(sys.winsysdir)\msiexec.exe\" /qn /i";
package_delete_command => "\"$(sys.winsysdir)\msiexec.exe\" /qn /x";
}


</pre>

<div class="node">
<a name="body-package_method-msi_implicit"></a>
<a name="body-package_005fmethod-msi_005fimplicit"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-package_005fmethod-rpm_005fversion">body package_method rpm_version</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-package_005fmethod-msi_005fexplicit">body package_method msi_explicit</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.83 body package_method msi_implicit(repo)</h3>

<pre class="verbatim">body package_method msi_implicit(repo)
# Use whole file name as promiser, e.g. "7-Zip-4.50-x86_64.msi",
# the name, version and arch is then deduced from the promiser
{
package_changes => "individual";
package_file_repositories => { "$(repo)" };

package_installed_regex => ".*";
 
package_name_convention => "$(name)-$(version)-$(arch).msi";
package_delete_convention => "$(firstrepo)$(name)-$(version)-$(arch).msi";

package_name_regex => "^(\S+)-(\d+\.?)+";
package_version_regex => "^\S+-((\d+\.?)+)";
package_arch_regex => "^\S+-[\d\.]+-(.*).msi";

package_add_command => "\"$(sys.winsysdir)\msiexec.exe\" /qn /i";
package_update_command => "\"$(sys.winsysdir)\msiexec.exe\" /qn /i";
package_delete_command => "\"$(sys.winsysdir)\msiexec.exe\" /qn /x";
}


</pre>

<div class="node">
<a name="body-package_method-rpm_version"></a>
<a name="body-package_005fmethod-rpm_005fversion"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-package_005fmethod-solaris">body package_method solaris</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-package_005fmethod-msi_005fimplicit">body package_method msi_implicit</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.84 body package_method rpm_version(repo)</h3>

<pre class="verbatim">body package_method rpm_version(repo)
{
package_changes => "individual";

package_list_command => "/bin/rpm -qa --queryformat \"i | repos | %{name} | %{version}-%{release} | %{arch}\n\"";

# set it to "0" to avoid caching of list during upgrade
package_list_update_ifelapsed => "240";

package_list_name_regex    => "[^|]+\|[^|]+\|\s+([^\s|]+).*";
package_list_version_regex => "[^|]+\|[^|]+\|[^|]+\|\s+([^\s|]+).*";
package_list_arch_regex    => "[^|]+\|[^|]+\|[^|]+\|[^|]+\|\s+([^\s]+).*";

package_installed_regex => "i.*";

package_file_repositories => { "$(repo)" };

package_name_convention => "$(name)-$(version).$(arch).rpm";

package_add_command => "/bin/rpm -ivh ";
package_update_command => "/bin/rpm -Uvh ";
package_delete_command => "/bin/rpm -e --nodeps";
package_noverify_regex => ".*[^\s].*";
}


</pre>

<div class="node">
<a name="body-package_method-solaris"></a>
<a name="body-package_005fmethod-solaris"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-package_005fmethod-yum">body package_method yum</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-package_005fmethod-rpm_005fversion">body package_method rpm_version</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.85 body package_method solaris (pkgname, spoolfile, adminfile)</h3>

<pre class="verbatim">body package_method solaris (pkgname, spoolfile, adminfile)
{
package_changes => "individual";
package_list_command => "/usr/bin/pkginfo -l";
package_multiline_start    =>  "\s*PKGINST:\s+[^\s]+.*";
package_list_name_regex    => "\s*PKGINST:\s+([^\s]+).*";
package_list_version_regex => "\s*VERSION:\s+([^\s]+).*";
package_list_arch_regex    => "\s*ARCH:\s+([^\s]+)";
package_installed_regex => "\s*STATUS:\s*(completely|partially)\s+installed.*";
package_name_convention => "$(name)";
package_add_command => "/usr/sbin/pkgadd -n -a /tmp/$(adminfile) -d /tmp/$(spoolfile)";
package_delete_command => "/usr/sbin/pkgrm -n -a /tmp/$(adminfile)";
}


#
# The following bundle is part of a package setup for solaris, see unit examples
#

</pre>

<div class="node">
<a name="body-package_method-yum"></a>
<a name="body-package_005fmethod-yum"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-package_005fmethod-yum_005frpm">body package_method yum_rpm</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-package_005fmethod-solaris">body package_method solaris</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.86 body package_method yum</h3>

<pre class="verbatim">body package_method yum
{
package_changes => "bulk";
package_list_command => "/usr/bin/yum list installed";
package_patch_list_command => "/usr/bin/yum check-update";

# Remember to escape special characters like |

package_list_name_regex    => "([^.]+).*";
package_list_version_regex => "[^\s]\s+([^\s]+).*";
package_list_arch_regex    => "[^.]+\.([^\s]+).*";

package_installed_regex => ".*(installed|\s+@).*";
package_name_convention => "$(name).$(arch)";

# set it to "0" to avoid caching of list during upgrade
package_list_update_ifelapsed => "240";

package_patch_installed_regex => "^\s.*";
package_patch_name_regex    => "([^.]+).*";
package_patch_version_regex => "[^\s]\s+([^\s]+).*";
package_patch_arch_regex    => "[^.]+\.([^\s]+).*";

package_add_command => "/usr/bin/yum -y install";
package_update_command => "/usr/bin/yum -y update";
package_delete_command => "/bin/rpm -e --nodeps";
package_verify_command => "/bin/rpm -V";
}


</pre>

<div class="node">
<a name="body-package_method-yum_rpm"></a>
<a name="body-package_005fmethod-yum_005frpm"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-package_005fmethod-zypper">body package_method zypper</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-package_005fmethod-yum">body package_method yum</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.87 body package_method yum_rpm</h3>

<pre class="verbatim">body package_method yum_rpm
# Contributed by Trond Hasle Amundsen

# More efficient package method for RedHat - uses rpm to list instead of yum
# Notes:
# - using $(name).$(arch) instead of $(name) for package_name_convention
#   causes uninstallation to fail.
# - using allmatches to remove for all architectures
#
{
  package_changes => "bulk";
  package_list_command => "/bin/rpm -qa --qf '%{name} %{version}-%{release} %{arch}\n'";
  package_patch_list_command => "/usr/bin/yum check-update";

  package_list_name_regex    => "^(\S+?)\s\S+?\s\S+$";
  package_list_version_regex => "^\S+?\s(\S+?)\s\S+$";
  package_list_arch_regex    => "^\S+?\s\S+?\s(\S+)$";

  package_installed_regex => ".*";
  package_name_convention => "$(name)";

  package_patch_installed_regex => "^\s.*";
  package_patch_name_regex    => "([^.]+).*";
  package_patch_version_regex => "[^\s]\s+([^\s]+).*";
  package_patch_arch_regex    => "[^.]+\.([^\s]+).*";

  package_add_command    => "/usr/bin/yum -y install";
  package_update_command => "/usr/bin/yum -y update";
  package_delete_command => "/bin/rpm -e --nodeps --allmatches";
  package_verify_command => "/bin/rpm -V";
}


# The solaris package system is poorly designed, with too many different
# names to track. See the example in tests/units/unit_package_solaris.cf
# to see how to use this

</pre>

<div class="node">
<a name="body-package_method-zypper"></a>
<a name="body-package_005fmethod-zypper"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-perms-m">body perms m</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-package_005fmethod-yum_005frpm">body package_method yum_rpm</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.88 body package_method zypper</h3>

<pre class="verbatim">body package_method zypper

{
package_changes => "bulk";

package_list_command => "/bin/rpm -qa --queryformat \"i | repos | %{name} | %{version}-%{release} | %{arch}\n\"";

# set it to "0" to avoid caching of list during upgrade
package_list_update_ifelapsed => "240";

package_patch_list_command => "/usr/bin/zypper patches";
package_installed_regex => "i.*";
package_list_name_regex    => "[^|]+\|[^|]+\|\s+([^\s]+).*";
package_list_version_regex => "[^|]+\|[^|]+\|[^|]+\|\s+([^\s]+).*";
package_list_arch_regex    => "[^|]+\|[^|]+\|[^|]+\|[^|]+\|\s+([^\s]+).*";

package_patch_installed_regex => ".*Installed.*|.*Not Applicable.*";
package_patch_name_regex    => "[^|]+\|\s+([^\s]+).*";
package_patch_version_regex => "[^|]+\|[^|]+\|\s+([^\s]+).*";

package_name_convention => "$(name)";
package_add_command => "/usr/bin/zypper --non-interactive install";
package_delete_command => "/usr/bin/zypper --non-interactive remove --force-resolution";
package_update_command => "/usr/bin/zypper --non-interactive update";

package_patch_command => "/usr/bin/zypper --non-interactive patch$"; # $ means no args
package_verify_command => "/usr/bin/zypper --non-interactive verify$";
}


</pre>

<div class="node">
<a name="body-perms-m"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-perms-mo">body perms mo</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-package_005fmethod-zypper">body package_method zypper</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.89 body perms m(mode)</h3>

<pre class="verbatim">body perms m(mode)
{
mode   => "$(mode)";
}


</pre>

<div class="node">
<a name="body-perms-mo"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-perms-mog">body perms mog</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-perms-m">body perms m</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.90 body perms mo(mode,user)</h3>

<pre class="verbatim">body perms mo(mode,user)
{
owners => { "$(user)" };
mode   => "$(mode)";
}


</pre>

<div class="node">
<a name="body-perms-mog"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-perms-og">body perms og</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-perms-mo">body perms mo</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.91 body perms mog(mode,user,group)</h3>

<pre class="verbatim">body perms mog(mode,user,group)
{
owners => { "$(user)" };
groups => { "$(group)" };
mode   => "$(mode)";
}


</pre>

<div class="node">
<a name="body-perms-og"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-perms-owner">body perms owner</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-perms-mog">body perms mog</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.92 body perms og(u,g)</h3>

<pre class="verbatim">body perms og(u,g)
{
owners => { "$(u)" };
groups => { "$(g)" };
}


</pre>

<div class="node">
<a name="body-perms-owner"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-process_005fcount-any_005fcount">body process_count any_count</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-perms-og">body perms og</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.93 body perms owner(user)</h3>

<pre class="verbatim">body perms owner(user)
{
owners => { "$(user)" };
}


</pre>

<div class="node">
<a name="body-process_count-any_count"></a>
<a name="body-process_005fcount-any_005fcount"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-process_005fcount-check_005frange">body process_count check_range</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-perms-owner">body perms owner</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.94 body process_count any_count(cl)</h3>

<pre class="verbatim">body process_count any_count(cl)

{
match_range => "0,0";
out_of_range_define => { "$(cl)" };
}


</pre>

<div class="node">
<a name="body-process_count-check_range"></a>
<a name="body-process_005fcount-check_005frange"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-process_005fselect-days_005folder_005fthan">body process_select days_older_than</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-process_005fcount-any_005fcount">body process_count any_count</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.95 body process_count check_range(name,lower,upper)</h3>

<pre class="verbatim">body process_count check_range(name,lower,upper)
{
match_range => irange("$(lower)","$(upper)");
out_of_range_define => { "$(name)_out_of_range" };
}


</pre>

<div class="node">
<a name="body-process_select-days_older_than"></a>
<a name="body-process_005fselect-days_005folder_005fthan"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-process_005fselect-exclude_005fprocs">body process_select exclude_procs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-process_005fcount-check_005frange">body process_count check_range</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.96 body process_select days_older_than(d)</h3>

<pre class="verbatim">body process_select days_older_than(d)
{
stime_range    => irange(ago(0,0,"$(d)",0,0,0),now);
process_result => "stime";
}


</pre>

<div class="node">
<a name="body-process_select-exclude_procs"></a>
<a name="body-process_005fselect-exclude_005fprocs"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-rename-disable">body rename disable</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-process_005fselect-days_005folder_005fthan">body process_select days_older_than</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.97 body process_select exclude_procs(x)</h3>

<pre class="verbatim">body process_select exclude_procs(x)
{
command => "$(x)";
process_result => "!command";
}


</pre>

<div class="node">
<a name="body-rename-disable"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-rename-rotate">body rename rotate</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-process_005fselect-exclude_005fprocs">body process_select exclude_procs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.98 body rename disable</h3>

<pre class="verbatim">body rename disable
{
disable => "true";
}


</pre>

<div class="node">
<a name="body-rename-rotate"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-rename-to">body rename to</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-rename-disable">body rename disable</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.99 body rename rotate(level)</h3>

<pre class="verbatim">body rename rotate(level)
{
rotate => "$(level)";
}


</pre>

<div class="node">
<a name="body-rename-to"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-replace_005fwith-comment">body replace_with comment</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-rename-rotate">body rename rotate</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.100 body rename to(file)</h3>

<pre class="verbatim">body rename to(file)
{
newname => "$(file)";
}


</pre>

<div class="node">
<a name="body-replace_with-comment"></a>
<a name="body-replace_005fwith-comment"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-replace_005fwith-uncomment">body replace_with uncomment</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-rename-to">body rename to</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.101 body replace_with comment(c)</h3>

<pre class="verbatim">body replace_with comment(c)
{
replace_value => "$(c) $(match.1)";
occurrences => "all";
}


</pre>

<div class="node">
<a name="body-replace_with-uncomment"></a>
<a name="body-replace_005fwith-uncomment"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-replace_005fwith-value">body replace_with value</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-replace_005fwith-comment">body replace_with comment</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.102 body replace_with uncomment</h3>

<pre class="verbatim">body replace_with uncomment
{
replace_value => "$(match.1)";
occurrences => "all";
}



</pre>

<div class="node">
<a name="body-replace_with-value"></a>
<a name="body-replace_005fwith-value"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-select_005fregion-INI_005fsection">body select_region INI_section</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-replace_005fwith-uncomment">body replace_with uncomment</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.103 body replace_with value(x)</h3>

<pre class="verbatim">body replace_with value(x)
{
replace_value => "$(x)";
occurrences => "all";
}


</pre>

<div class="node">
<a name="body-select_region-INI_section"></a>
<a name="body-select_005fregion-INI_005fsection"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-service_005fmethod-bootstart">body service_method bootstart</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-replace_005fwith-value">body replace_with value</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.104 body select_region INI_section(x)</h3>

<pre class="verbatim">body select_region INI_section(x)
{
select_start => "\[$(x)\]\s*";
select_end => "\[.*\]\s*";
}


</pre>

<div class="node">
<a name="body-service_method-bootstart"></a>
<a name="body-service_005fmethod-bootstart"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-service_005fmethod-force_005fdeps">body service_method force_deps</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-select_005fregion-INI_005fsection">body select_region INI_section</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.105 body service_method bootstart</h3>

<pre class="verbatim">body service_method bootstart
{
  service_autostart_policy => "boot_time";
  service_dependence_chain => "start_parent_services";
windows::
  service_type => "windows";
}


</pre>

<div class="node">
<a name="body-service_method-force_deps"></a>
<a name="body-service_005fmethod-force_005fdeps"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#body-volume-min_005ffree_005fspace">body volume min_free_space</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-service_005fmethod-bootstart">body service_method bootstart</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.106 body service_method force_deps</h3>

<pre class="verbatim">body service_method force_deps
{
  service_dependence_chain => "all_related";
windows::
  service_type => "windows";
}


</pre>

<div class="node">
<a name="body-volume-min_free_space"></a>
<a name="body-volume-min_005ffree_005fspace"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-agent-cronjob">bundle agent cronjob</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-service_005fmethod-force_005fdeps">body service_method force_deps</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.107 body volume min_free_space(free)</h3>

<pre class="verbatim">body volume min_free_space(free)
{
check_foreign  => "false";
freespace      => "$(free)";
sensible_size  => "10000";
sensible_count => "2";
}


</pre>

<div class="node">
<a name="bundle-agent-cronjob"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-append_005fgroups_005fstarting">bundle edit_line append_groups_starting</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#body-volume-min_005ffree_005fspace">body volume min_free_space</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.108 bundle agent cronjob(commands,user,hours,mins)</h3>

<pre class="verbatim">bundle agent cronjob(commands,user,hours,mins)

 # For adding lines to crontab for a user
 # methods:
 #  "cron" usebundle => cronjob("/bin/ls","mark","*","5,10");

{
vars:
  SuSE::
   "crontab" string => "/var/spool/cron/tabs";
  redhat|fedora::
   "crontab" string => "/var/spool/cron";
 !(SuSE|redhat|fedora)::
    "crontab" string => "/var/spool/cron/crontabs"; 

files:

!windows::
  "$(crontab)/$(user)" 

    comment => "A user's regular batch jobs are added to this file",
     create => "true",
  edit_line => append_if_no_line("$(mins) $(hours) * * * $(commands)"),
      perms => mo("644","$(user)"),
    classes => if_repaired("changed_crontab");

processes:

changed_crontab::
   "cron"
         comment => "Most crons need to be huped after file changes",
         signals => { "hup" };

}




</pre>

<div class="node">
<a name="bundle-edit_line-append_groups_starting"></a>
<a name="bundle-edit_005fline-append_005fgroups_005fstarting"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-append_005fif_005fno_005fline">bundle edit_line append_if_no_line</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-agent-cronjob">bundle agent cronjob</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.109 bundle edit_line append_groups_starting(v)</h3>

<pre class="verbatim">bundle edit_line append_groups_starting(v)

 # For adding groups to /etc/group, needs
 # an array v[groupname] string => "line..."

{
vars:

  "index"        slist => getindices("$(v)");

classes:

  "add_$(index)" not => groupexists("$(index)");

insert_lines:

  "$($(v)[$(index)])",

         comment => "Append users into a group file format",
      ifvarclass => "add_$(index)";

}


</pre>

<div class="node">
<a name="bundle-edit_line-append_if_no_line"></a>
<a name="bundle-edit_005fline-append_005fif_005fno_005fline"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-append_005fif_005fno_005flines">bundle edit_line append_if_no_lines</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-append_005fgroups_005fstarting">bundle edit_line append_groups_starting</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.110 bundle edit_line append_if_no_line(str)</h3>

<pre class="verbatim">bundle edit_line append_if_no_line(str)
{
insert_lines:

 "$(str)"

     comment => "Append a line to the file if it doesn't already exist";
}


</pre>

<div class="node">
<a name="bundle-edit_line-append_if_no_lines"></a>
<a name="bundle-edit_005fline-append_005fif_005fno_005flines"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-append_005fto_005fline_005fend">bundle edit_line append_to_line_end</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-append_005fif_005fno_005fline">bundle edit_line append_if_no_line</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.111 bundle edit_line append_if_no_lines(list)</h3>

<pre class="verbatim">bundle edit_line append_if_no_lines(list)
{
insert_lines:

 "$(list)"

   comment => "Append lines to the file if they don't already exist";
}


</pre>

<div class="node">
<a name="bundle-edit_line-append_to_line_end"></a>
<a name="bundle-edit_005fline-append_005fto_005fline_005fend"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-append_005fuser_005ffield">bundle edit_line append_user_field</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-append_005fif_005fno_005flines">bundle edit_line append_if_no_lines</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.112 bundle edit_line append_to_line_end(start,end)</h3>

<pre class="verbatim">bundle edit_line append_to_line_end(start,end)
#
# Lines starting with "$(start)" and not ending with "$(end)"
# will get appended with "$(end)", whitespaces will be left unmodified.
# For example, append_to_line_end("kernel", "vga=791") would replace
# "kernel /boot/vmlinuz root=/dev/sda7"
# with 
# "kernel /boot/vmlinuz root=/dev/sda7 resume=/dev/sda9 vga=791"
#
# WARNING: Be careful not to have multiple promises matching the same line,
#          which would result in the line growing indefinetively.
{
field_edits:

   "\s*$(start)\s.*"
      edit_field => line("(^|\s)$(start)\s*", "2", "$(end)","append");
}


</pre>

<div class="node">
<a name="bundle-edit_line-append_user_field"></a>
<a name="bundle-edit_005fline-append_005fuser_005ffield"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-append_005fusers_005fstarting">bundle edit_line append_users_starting</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-append_005fto_005fline_005fend">bundle edit_line append_to_line_end</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.113 bundle edit_line append_user_field(group,field,allusers)</h3>

<pre class="verbatim">bundle edit_line append_user_field(group,field,allusers)

 # For adding users to to a file like /etc/group
 # at field position "field", comma separated subfields

{
vars:

  "val" slist => { @(allusers) };

field_edits:

 "$(group):.*"

       comment => "Append users into a password file format",
    edit_field => col(":","$(field)","$(val)","alphanum");
}


</pre>

<div class="node">
<a name="bundle-edit_line-append_users_starting"></a>
<a name="bundle-edit_005fline-append_005fusers_005fstarting"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-comment_005flines_005fcontaining">bundle edit_line comment_lines_containing</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-append_005fuser_005ffield">bundle edit_line append_user_field</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.114 bundle edit_line append_users_starting(v)</h3>

<pre class="verbatim">bundle edit_line append_users_starting(v)

 # For adding to /etc/passwd or etc/shadow, needs
 # an array v[username] string => "line..."

{
vars:

  "index"        slist => getindices("$(v)");

classes:

  "add_$(index)" not => userexists("$(index)");

insert_lines:

  "$($(v)[$(index)])",

         comment => "Append users into a password file format",
      ifvarclass => "add_$(index)";
}


</pre>

<div class="node">
<a name="bundle-edit_line-comment_lines_containing"></a>
<a name="bundle-edit_005fline-comment_005flines_005fcontaining"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-comment_005flines_005fmatching">bundle edit_line comment_lines_matching</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-append_005fusers_005fstarting">bundle edit_line append_users_starting</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.115 bundle edit_line comment_lines_containing(regex,comment)</h3>

<pre class="verbatim">bundle edit_line comment_lines_containing(regex,comment)

 # Comment lines of a file containing a regex

{
replace_patterns:
 
 "^(.*$(regex).*)$" 

     replace_with => comment("$(comment)"),
          comment => "Comment out lines in a file";
}
	 
	 
</pre>

<div class="node">
<a name="bundle-edit_line-comment_lines_matching"></a>
<a name="bundle-edit_005fline-comment_005flines_005fmatching"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-create_005fsolaris_005fadmin_005ffile">bundle edit_line create_solaris_admin_file</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-comment_005flines_005fcontaining">bundle edit_line comment_lines_containing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.116 bundle edit_line comment_lines_matching(regex,comment)</h3>

<pre class="verbatim">bundle edit_line comment_lines_matching(regex,comment)

 # Comment lines of a file matching a regex

{
replace_patterns:
	 
 "^($(regex))$" 

     replace_with => comment("$(comment)"),
          comment => "Search and replace string";
}
	 
	 
</pre>

<div class="node">
<a name="bundle-edit_line-create_solaris_admin_file"></a>
<a name="bundle-edit_005fline-create_005fsolaris_005fadmin_005ffile"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-delete_005flines_005fmatching">bundle edit_line delete_lines_matching</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-comment_005flines_005fmatching">bundle edit_line comment_lines_matching</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.117 bundle edit_line create_solaris_admin_file</h3>

<pre class="verbatim">bundle edit_line create_solaris_admin_file
{
insert_lines:
		
  "mail=
instance=unique
partial=nocheck
runlevel=nocheck
idepend=nocheck
rdepend=nocheck
space=nocheck
setuid=nocheck
conflict=nocheck
action=nocheck
networktimeout=60
networkretries=3
authentication=quit
keystore=/var/sadm/security
proxy=
basedir=default";
}


</pre>

<div class="node">
<a name="bundle-edit_line-delete_lines_matching"></a>
<a name="bundle-edit_005fline-delete_005flines_005fmatching"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-expand_005ftemplate">bundle edit_line expand_template</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-create_005fsolaris_005fadmin_005ffile">bundle edit_line create_solaris_admin_file</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.118 bundle edit_line delete_lines_matching(regex)</h3>

<pre class="verbatim">bundle edit_line delete_lines_matching(regex)
{
delete_lines:

  "$(regex)"

     comment => "Delete lines matching regular expressions";
}


</pre>

<div class="node">
<a name="bundle-edit_line-expand_template"></a>
<a name="bundle-edit_005fline-expand_005ftemplate"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-insert_005ffile">bundle edit_line insert_file</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-delete_005flines_005fmatching">bundle edit_line delete_lines_matching</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.119 bundle edit_line expand_template(templatefile)</h3>

<pre class="verbatim">bundle edit_line expand_template(templatefile)

 # Read in the named text file and expand $(var)
 # inside the file

{
insert_lines:

   "$(templatefile)"

        insert_type => "file",
            comment => "Expand variables in the template file",
     expand_scalars => "true";
}

</pre>

<div class="node">
<a name="bundle-edit_line-insert_file"></a>
<a name="bundle-edit_005fline-insert_005ffile"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-insert_005flines">bundle edit_line insert_lines</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-expand_005ftemplate">bundle edit_line expand_template</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.120 bundle edit_line insert_file(templatefile)</h3>

<pre class="verbatim">bundle edit_line insert_file(templatefile)
{
insert_lines:

   "$(templatefile)"
            comment => "Insert the template file into the file being edited",
        insert_type => "file";
}


</pre>

<div class="node">
<a name="bundle-edit_line-insert_lines"></a>
<a name="bundle-edit_005fline-insert_005flines"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-replace_005fline_005fend">bundle edit_line replace_line_end</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-insert_005ffile">bundle edit_line insert_file</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.121 bundle edit_line insert_lines(lines)</h3>

<pre class="verbatim"></pre>

<div class="node">
<a name="bundle-edit_line-replace_line_end"></a>
<a name="bundle-edit_005fline-replace_005fline_005fend"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-replace_005for_005fadd">bundle edit_line replace_or_add</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-insert_005flines">bundle edit_line insert_lines</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.122 bundle edit_line replace_line_end(start,end)</h3>

<pre class="verbatim">bundle edit_line replace_line_end(start,end)
#
# Lines starting with "$(start)" will get the ending given in "$(end)",
# whitespaces will be left unmodified.
# For example, replace_line_end("ftp", "2121/tcp") would replace
# "ftp             21/tcp"
# with 
# "ftp             2121/tcp"
{
field_edits:

   "\s*$(start)\s.*"
      edit_field => line("(^|\s)$(start)\s*", "2", "$(end)","set");
}


</pre>

<div class="node">
<a name="bundle-edit_line-replace_or_add"></a>
<a name="bundle-edit_005fline-replace_005for_005fadd"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-resolvconf">bundle edit_line resolvconf</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-replace_005fline_005fend">bundle edit_line replace_line_end</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.123 bundle edit_line replace_or_add(pattern,line)</h3>

<pre class="verbatim">bundle edit_line replace_or_add(pattern,line)

 # Replace a pattern in a file with a single line.
 # If the pattern is not found, add the line to the file.
 # The pattern must match the whole line (it is automatically
 # anchored to the start and end of the line) to avoid
 # ambiguity.

{
vars:
  "cline" string => canonify("$(line)");

replace_patterns:
  "^(?!$(line))$(pattern)$"
  replace_with => value("$(line)"),
  classes => always("replace_done_$(cline)");

insert_lines:
  "$(line)"
    ifvarclass => "replace_done_$(cline)";
}


</pre>

<div class="node">
<a name="bundle-edit_line-resolvconf"></a>
<a name="bundle-edit_005fline-resolvconf"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-set_005fconfig_005fvalues">bundle edit_line set_config_values</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-replace_005for_005fadd">bundle edit_line replace_or_add</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.124 bundle edit_line resolvconf(search,list)</h3>

<pre class="verbatim">bundle edit_line resolvconf(search,list)

 # search is the search domains with space
 # list is an slist of nameserver addresses

{
delete_lines:

  "search.*"     comment => "Reset search lines from resolver";
  "nameserver.*" comment => "Reset nameservers in resolver";

insert_lines:

  "search $(search)"    comment => "Add search domains to resolver";
  "nameserver $(list)"  comment => "Add name servers to resolver";
}


</pre>

<div class="node">
<a name="bundle-edit_line-set_config_values"></a>
<a name="bundle-edit_005fline-set_005fconfig_005fvalues"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-set_005fuser_005ffield">bundle edit_line set_user_field</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-resolvconf">bundle edit_line resolvconf</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.125 bundle edit_line set_config_values(v)</h3>

<pre class="verbatim">bundle edit_line set_config_values(v)

 # Sets the RHS of configuration items in the file of the form
 #   LHS RHS
 # If the line is commented out with #, it gets uncommented first.
 # Adds a new line if none exists.
 # The argument is the fully-qualified name of an associative array containing v[LHS]="rhs"

{
vars:
  "index" slist => getindices("$(v)");

  # Be careful if the index string contains funny chars
  "cindex[$(index)]" string => canonify("$(index)");

replace_patterns:
  # If the line is there, maybe commented out, uncomment and replace with
  # the correct value
  "^\s*($(index)\s+(?!$($(v)[$(index)])).*|# ?$(index)\s+.*)$"
    replace_with => value("$(index) $($(v)[$(index)])"),
    classes => always("replace_attempted_$(cindex[$(index)])");

insert_lines:
  "$(index) $($(v)[$(index)])"
    ifvarclass => "replace_attempted_$(cindex[$(index)])";

}


</pre>

<div class="node">
<a name="bundle-edit_line-set_user_field"></a>
<a name="bundle-edit_005fline-set_005fuser_005ffield"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-set_005fvariable_005fvalues">bundle edit_line set_variable_values</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-set_005fconfig_005fvalues">bundle edit_line set_config_values</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.126 bundle edit_line set_user_field(user,field,val)</h3>

<pre class="verbatim">bundle edit_line set_user_field(user,field,val)

 # Set the value of field number "field" in
 # a :-field formatted file like /etc/passwd

{
field_edits:

 "$(user):.*"

        comment => "Edit a user attribute in the password file",
     edit_field => col(":","$(field)","$(val)","set");
}


</pre>

<div class="node">
<a name="bundle-edit_line-set_variable_values"></a>
<a name="bundle-edit_005fline-set_005fvariable_005fvalues"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-set_005fvariable_005fvalues2">bundle edit_line set_variable_values2</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-set_005fuser_005ffield">bundle edit_line set_user_field</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.127 bundle edit_line set_variable_values(v)</h3>

<pre class="verbatim">bundle edit_line set_variable_values(v)

 # Sets the RHS of variables in the file of the form
 #   LHS = RHS
 # Adds a new line if no LHS exists, repairs RHS values if one does exist
 #
 # To use:
 #   1) Define an array, where the keys are the LHS and the values are the RHS
 #        "stuff[lhs-1]" string => "rhs1";
 #        "stuff[lhs-2]" string => "rhs2";
 #   2) The parameter passed to the edit_line promise is the fully qualified
 #      name of the array (i.e., "bundlename.stuff") WITHOUT any "$" or "@"

{
vars:

  "index" slist => getindices("$(v)");

  # Be careful if the index string contains funny chars

  "cindex[$(index)]" string => canonify("$(index)");

field_edits:

  # match a line starting like the key = something

  "\s*$(index)\s*=.*"

     edit_field => col("=","2","$($(v)[$(index)])","set"),
        classes => if_ok("$(cindex[$(index)])_in_file"),
        comment => "Match a line starting like key = something";

insert_lines:

  "$(index)=$($(v)[$(index)])",

         comment => "Insert a variable definition",
      ifvarclass => "!$(cindex[$(index)])_in_file";
}

</pre>

<div class="node">
<a name="bundle-edit_line-set_variable_values2"></a>
<a name="bundle-edit_005fline-set_005fvariable_005fvalues2"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-uncomment_005flines_005fcontaining">bundle edit_line uncomment_lines_containing</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-set_005fvariable_005fvalues">bundle edit_line set_variable_values</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.128 bundle edit_line set_variable_values2(file,v)</h3>

<pre class="verbatim">bundle edit_line set_variable_values2(file,v)
#
# Another implementation of set_variable_values.
# The input and output should be exactly the same (except the file name), 
# but in some Cfengine versions there are bugs, 
# so this bundle can be used as a workaround.
#
{
vars:

  "index" slist => getindices("$(v)");

  # Be careful if the index string contains funny chars

  "cindex[$(index)]" string => canonify("$(index)");

  "fieldc_$(cindex[$(index)])" int => getfields("$(index).*","$(file)","=","FIELD_$(cindex[$(index)])");

classes:
  "$(cindex[$(index)])_in_file" expression => strcmp("$(index)=$($(v)[$(index)])", "$(FIELD_$(index)[1])=$(FIELD_$(index)[2])");


delete_lines:  # delete any lhs when no match
  "$(index)=.*",
    ifvarclass => "!$(cindex[$(index)])_in_file";


insert_lines:

  "$(index)=$($(v)[$(index)])",

         comment => "Insert a variable definition",
      ifvarclass => "!$(cindex[$(index)])_in_file";

}


</pre>

<div class="node">
<a name="bundle-edit_line-uncomment_lines_containing"></a>
<a name="bundle-edit_005fline-uncomment_005flines_005fcontaining"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-uncomment_005flines_005fmatching">bundle edit_line uncomment_lines_matching</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-set_005fvariable_005fvalues2">bundle edit_line set_variable_values2</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.129 bundle edit_line uncomment_lines_containing(regex,comment)</h3>

<pre class="verbatim">bundle edit_line uncomment_lines_containing(regex,comment)
	 
 # Uncomment lines of a file where the regex matches
 # the text after the comment string
	 
{
replace_patterns:
 
 "^$(comment)\s?(.*$(regex).*)$" 

    replace_with => uncomment,
         comment => "Uncomment a line containing a fragment";
}


</pre>

<div class="node">
<a name="bundle-edit_line-uncomment_lines_matching"></a>
<a name="bundle-edit_005fline-uncomment_005flines_005fmatching"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bundle-edit_005fline-warn_005flines_005fmatching">bundle edit_line warn_lines_matching</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-uncomment_005flines_005fcontaining">bundle edit_line uncomment_lines_containing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.130 bundle edit_line uncomment_lines_matching(regex,comment)</h3>

<pre class="verbatim">bundle edit_line uncomment_lines_matching(regex,comment)
	 
 # Uncomment lines of a file where the regex matches
 # the text after the comment string
	 
{
replace_patterns:
 
 "^$(comment)\s?($(regex))$" 

       replace_with => uncomment,
            comment => "Uncomment lines matching a regular expression";
}
	 

</pre>

<div class="node">
<a name="bundle-edit_line-warn_lines_matching"></a>
<a name="bundle-edit_005fline-warn_005flines_005fmatching"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bundle-edit_005fline-uncomment_005flines_005fmatching">bundle edit_line uncomment_lines_matching</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-Purpose-Of-This-Handbook">The Purpose Of This Handbook</a>

</div>

<h3 class="section">1.131 bundle edit_line warn_lines_matching(regex)</h3>

<pre class="verbatim">bundle edit_line warn_lines_matching(regex)
{
delete_lines:

  "$(regex)"  

   comment => "Warn about lines in a file",
    action => warn_only;
}


</pre>

<p><a name="Contents">

<div class="contents">
<h2>Table of Contents</h2>
<ul>
<li><a name="toc_Top" href="#Top">Cfengine-Open-Promise-Body-Library</a>
<li><a name="toc_The-Purpose-Of-This-Handbook" href="#The-Purpose-Of-This-Handbook">1 The Purpose Of This Handbook</a>
<ul>
<li><a href="#body-acl-access_005fgeneric">1.1 body acl access_generic(acl)</a>
<li><a href="#body-acl-ntfs">1.2 body acl ntfs(acl)</a>
<li><a href="#body-acl-strict">1.3 body acl strict</a>
<li><a href="#body-action-bg">1.4 body action bg(elapsed,expire)</a>
<li><a href="#body-action-if_005felapsed">1.5 body action if_elapsed(x)</a>
<li><a href="#body-action-ifwin_005fbg">1.6 body action ifwin_bg</a>
<li><a href="#body-action-immediate">1.7 body action immediate</a>
<li><a href="#body-action-log_005frepaired">1.8 body action log_repaired(log,message)</a>
<li><a href="#body-action-log_005fverbose">1.9 body action log_verbose</a>
<li><a href="#body-action-measure_005fperformance">1.10 body action measure_performance(x)</a>
<li><a href="#body-action-policy">1.11 body action policy(p)</a>
<li><a href="#body-action-sample_005frate">1.12 body action sample_rate(x)</a>
<li><a href="#body-action-warn_005fonly">1.13 body action warn_only</a>
<li><a href="#body-changes-detect_005fall_005fchange">1.14 body changes detect_all_change</a>
<li><a href="#body-changes-detect_005fcontent">1.15 body changes detect_content</a>
<li><a href="#body-changes-diff">1.16 body changes diff</a>
<li><a href="#body-changes-diff_005fnoupdate">1.17 body changes diff_noupdate</a>
<li><a href="#body-changes-noupdate">1.18 body changes noupdate</a>
<li><a href="#body-classes-always">1.19 body classes always(x)</a>
<li><a href="#body-classes-cf2_005fif_005felse">1.20 body classes cf2_if_else(yes,no)</a>
<li><a href="#body-classes-cmd_005frepair">1.21 body classes cmd_repair(code,cl)</a>
<li><a href="#body-classes-enumerate">1.22 body classes enumerate(x)</a>
<li><a href="#body-classes-if_005felse">1.23 body classes if_else(yes,no)</a>
<li><a href="#body-classes-if_005fnotkept">1.24 body classes if_notkept(x)</a>
<li><a href="#body-classes-if_005fok">1.25 body classes if_ok(x)</a>
<li><a href="#body-classes-if_005frepaired">1.26 body classes if_repaired(x)</a>
<li><a href="#body-classes-state_005frepaired">1.27 body classes state_repaired(x)</a>
<li><a href="#body-contain-in_005fdir">1.28 body contain in_dir(s)</a>
<li><a href="#body-contain-in_005fdir_005fshell">1.29 body contain in_dir_shell(s)</a>
<li><a href="#body-contain-in_005fshell">1.30 body contain in_shell</a>
<li><a href="#body-contain-in_005fshell_005fand_005fsilent">1.31 body contain in_shell_and_silent</a>
<li><a href="#body-contain-in_005fshell_005fbg">1.32 body contain in_shell_bg</a>
<li><a href="#body-contain-jail">1.33 body contain jail(owner,root,dir)</a>
<li><a href="#body-contain-setuid">1.34 body contain setuid(x)</a>
<li><a href="#body-contain-setuid_005fsh">1.35 body contain setuid_sh(x)</a>
<li><a href="#body-contain-setuidgid_005fsh">1.36 body contain setuidgid_sh(owner,group)</a>
<li><a href="#body-contain-silent">1.37 body contain silent</a>
<li><a href="#body-contain-silent_005fin_005fdir">1.38 body contain silent_in_dir(s)</a>
<li><a href="#body-copy_005ffrom-backup_005flocal_005fcp">1.39 body copy_from backup_local_cp(from)</a>
<li><a href="#body-copy_005ffrom-local_005fcp">1.40 body copy_from local_cp(from)</a>
<li><a href="#body-copy_005ffrom-local_005fdcp">1.41 body copy_from local_dcp(from)</a>
<li><a href="#body-copy_005ffrom-no_005fbackup_005fcp">1.42 body copy_from no_backup_cp(from)</a>
<li><a href="#body-copy_005ffrom-no_005fbackup_005fdcp">1.43 body copy_from no_backup_dcp(from)</a>
<li><a href="#body-copy_005ffrom-no_005fbackup_005frcp">1.44 body copy_from no_backup_rcp(from,server)</a>
<li><a href="#body-copy_005ffrom-perms_005fcp">1.45 body copy_from perms_cp(from)</a>
<li><a href="#body-copy_005ffrom-remote_005fcp">1.46 body copy_from remote_cp(from,server)</a>
<li><a href="#body-copy_005ffrom-remote_005fdcp">1.47 body copy_from remote_dcp(from,server)</a>
<li><a href="#body-copy_005ffrom-secure_005fcp">1.48 body copy_from secure_cp(from,server)</a>
<li><a href="#body-copy_005ffrom-seed_005fcp">1.49 body copy_from seed_cp(from)</a>
<li><a href="#body-copy_005ffrom-sync_005fcp">1.50 body copy_from sync_cp(from,server)</a>
<li><a href="#body-delete-tidy">1.51 body delete tidy</a>
<li><a href="#body-depth_005fsearch-include_005fbase">1.52 body depth_search include_base</a>
<li><a href="#body-depth_005fsearch-recurse">1.53 body depth_search recurse(d)</a>
<li><a href="#body-depth_005fsearch-recurse_005fignore">1.54 body depth_search recurse_ignore(d,list)</a>
<li><a href="#body-edit_005fdefaults-empty">1.55 body edit_defaults empty</a>
<li><a href="#body-edit_005fdefaults-no_005fbackup">1.56 body edit_defaults no_backup</a>
<li><a href="#body-edit_005fdefaults-std_005fdefs">1.57 body edit_defaults std_defs</a>
<li><a href="#body-edit_005ffield-col">1.58 body edit_field col(split,col,newval,method)</a>
<li><a href="#body-edit_005ffield-line">1.59 body edit_field line(split,col,newval,method)</a>
<li><a href="#body-edit_005ffield-quoted_005fvar">1.60 body edit_field quoted_var(newval,method)</a>
<li><a href="#body-file_005fselect-by_005fname">1.61 body file_select by_name(names)</a>
<li><a href="#body-file_005fselect-days_005fold">1.62 body file_select days_old(days)</a>
<li><a href="#body-file_005fselect-dirs">1.63 body file_select dirs</a>
<li><a href="#body-file_005fselect-ex_005flist">1.64 body file_select ex_list(names)</a>
<li><a href="#body-file_005fselect-exclude">1.65 body file_select exclude(name)</a>
<li><a href="#body-file_005fselect-name_005fage">1.66 body file_select name_age(name,days)</a>
<li><a href="#body-file_005fselect-plain">1.67 body file_select plain</a>
<li><a href="#body-file_005fselect-size_005frange">1.68 body file_select size_range(from,to)</a>
<li><a href="#body-link_005ffrom-linkchildren">1.69 body link_from linkchildren(tofile)</a>
<li><a href="#body-link_005ffrom-ln_005fs">1.70 body link_from ln_s(x)</a>
<li><a href="#body-location-after">1.71 body location after(str)</a>
<li><a href="#body-location-start">1.72 body location start</a>
<li><a href="#body-match_005fvalue-scan_005fchanging_005ffile">1.73 body match_value scan_changing_file(line)</a>
<li><a href="#body-match_005fvalue-scan_005flog">1.74 body match_value scan_log(line)</a>
<li><a href="#body-mount-nfs">1.75 body mount nfs(server,source)</a>
<li><a href="#body-mount-nfs_005fp">1.76 body mount nfs_p(server,source,perm)</a>
<li><a href="#body-mount-unmount">1.77 body mount unmount</a>
<li><a href="#body-package_005fmethod-apt">1.78 body package_method apt</a>
<li><a href="#body-package_005fmethod-dpkg_005fversion">1.79 body package_method dpkg_version(repo)</a>
<li><a href="#body-package_005fmethod-freebsd">1.80 body package_method freebsd</a>
<li><a href="#body-package_005fmethod-generic">1.81 body package_method generic</a>
<li><a href="#body-package_005fmethod-msi_005fexplicit">1.82 body package_method msi_explicit(repo)</a>
<li><a href="#body-package_005fmethod-msi_005fimplicit">1.83 body package_method msi_implicit(repo)</a>
<li><a href="#body-package_005fmethod-rpm_005fversion">1.84 body package_method rpm_version(repo)</a>
<li><a href="#body-package_005fmethod-solaris">1.85 body package_method solaris (pkgname, spoolfile, adminfile)</a>
<li><a href="#body-package_005fmethod-yum">1.86 body package_method yum</a>
<li><a href="#body-package_005fmethod-yum_005frpm">1.87 body package_method yum_rpm</a>
<li><a href="#body-package_005fmethod-zypper">1.88 body package_method zypper</a>
<li><a href="#body-perms-m">1.89 body perms m(mode)</a>
<li><a href="#body-perms-mo">1.90 body perms mo(mode,user)</a>
<li><a href="#body-perms-mog">1.91 body perms mog(mode,user,group)</a>
<li><a href="#body-perms-og">1.92 body perms og(u,g)</a>
<li><a href="#body-perms-owner">1.93 body perms owner(user)</a>
<li><a href="#body-process_005fcount-any_005fcount">1.94 body process_count any_count(cl)</a>
<li><a href="#body-process_005fcount-check_005frange">1.95 body process_count check_range(name,lower,upper)</a>
<li><a href="#body-process_005fselect-days_005folder_005fthan">1.96 body process_select days_older_than(d)</a>
<li><a href="#body-process_005fselect-exclude_005fprocs">1.97 body process_select exclude_procs(x)</a>
<li><a href="#body-rename-disable">1.98 body rename disable</a>
<li><a href="#body-rename-rotate">1.99 body rename rotate(level)</a>
<li><a href="#body-rename-to">1.100 body rename to(file)</a>
<li><a href="#body-replace_005fwith-comment">1.101 body replace_with comment(c)</a>
<li><a href="#body-replace_005fwith-uncomment">1.102 body replace_with uncomment</a>
<li><a href="#body-replace_005fwith-value">1.103 body replace_with value(x)</a>
<li><a href="#body-select_005fregion-INI_005fsection">1.104 body select_region INI_section(x)</a>
<li><a href="#body-service_005fmethod-bootstart">1.105 body service_method bootstart</a>
<li><a href="#body-service_005fmethod-force_005fdeps">1.106 body service_method force_deps</a>
<li><a href="#body-volume-min_005ffree_005fspace">1.107 body volume min_free_space(free)</a>
<li><a href="#bundle-agent-cronjob">1.108 bundle agent cronjob(commands,user,hours,mins)</a>
<li><a href="#bundle-edit_005fline-append_005fgroups_005fstarting">1.109 bundle edit_line append_groups_starting(v)</a>
<li><a href="#bundle-edit_005fline-append_005fif_005fno_005fline">1.110 bundle edit_line append_if_no_line(str)</a>
<li><a href="#bundle-edit_005fline-append_005fif_005fno_005flines">1.111 bundle edit_line append_if_no_lines(list)</a>
<li><a href="#bundle-edit_005fline-append_005fto_005fline_005fend">1.112 bundle edit_line append_to_line_end(start,end)</a>
<li><a href="#bundle-edit_005fline-append_005fuser_005ffield">1.113 bundle edit_line append_user_field(group,field,allusers)</a>
<li><a href="#bundle-edit_005fline-append_005fusers_005fstarting">1.114 bundle edit_line append_users_starting(v)</a>
<li><a href="#bundle-edit_005fline-comment_005flines_005fcontaining">1.115 bundle edit_line comment_lines_containing(regex,comment)</a>
<li><a href="#bundle-edit_005fline-comment_005flines_005fmatching">1.116 bundle edit_line comment_lines_matching(regex,comment)</a>
<li><a href="#bundle-edit_005fline-create_005fsolaris_005fadmin_005ffile">1.117 bundle edit_line create_solaris_admin_file</a>
<li><a href="#bundle-edit_005fline-delete_005flines_005fmatching">1.118 bundle edit_line delete_lines_matching(regex)</a>
<li><a href="#bundle-edit_005fline-expand_005ftemplate">1.119 bundle edit_line expand_template(templatefile)</a>
<li><a href="#bundle-edit_005fline-insert_005ffile">1.120 bundle edit_line insert_file(templatefile)</a>
<li><a href="#bundle-edit_005fline-insert_005flines">1.121 bundle edit_line insert_lines(lines)</a>
<li><a href="#bundle-edit_005fline-replace_005fline_005fend">1.122 bundle edit_line replace_line_end(start,end)</a>
<li><a href="#bundle-edit_005fline-replace_005for_005fadd">1.123 bundle edit_line replace_or_add(pattern,line)</a>
<li><a href="#bundle-edit_005fline-resolvconf">1.124 bundle edit_line resolvconf(search,list)</a>
<li><a href="#bundle-edit_005fline-set_005fconfig_005fvalues">1.125 bundle edit_line set_config_values(v)</a>
<li><a href="#bundle-edit_005fline-set_005fuser_005ffield">1.126 bundle edit_line set_user_field(user,field,val)</a>
<li><a href="#bundle-edit_005fline-set_005fvariable_005fvalues">1.127 bundle edit_line set_variable_values(v)</a>
<li><a href="#bundle-edit_005fline-set_005fvariable_005fvalues2">1.128 bundle edit_line set_variable_values2(file,v)</a>
<li><a href="#bundle-edit_005fline-uncomment_005flines_005fcontaining">1.129 bundle edit_line uncomment_lines_containing(regex,comment)</a>
<li><a href="#bundle-edit_005fline-uncomment_005flines_005fmatching">1.130 bundle edit_line uncomment_lines_matching(regex,comment)</a>
<li><a href="#bundle-edit_005fline-warn_005flines_005fmatching">1.131 bundle edit_line warn_lines_matching(regex)</a>
</li></ul>
</li></ul>
</div>

</body></html>

