<html lang="en">
<head>
<title>Content-Driven Policies</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Content-Driven Policies">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
@font-face {
    font-family: 'CFE_FONT';
    src: url('fonts/eot/opensans-regular-webfont.eot');
    src: local('â˜º'),  url('fonts/ttf/opensans-regular-webfont.ttf') format('truetype'), url('fonts/svg/opensans-regular-webfont.svg') format('svg');
    font-weight: normal;
    font-style: normal;
}    
pre {
    background-color: #EEFFDD;
    border: 1px solid #CCCCCC;
    font-family: courier;
    margin-bottom: 10px;
    margin-top: 10px;
    padding: 5px;
    font-size: 90%;
    }
pre.display { font-family:inherit }
pre.format  { font-family:inherit }
pre.smallexample
pre.smalllisp,
pre.smallformat,
pre.smalldisplay {
  font-size: 90%;
} 

span.sc    { font-variant:small-caps }
span.roman { font-family:serif; font-weight:normal; } 
span.sansserif { font-family:sans-serif; font-weight:normal; } 

body {
    font:  90%  'CFE_FONT', arial, Helvetica,sans-serif; 
    color: #646464;
    padding: 10px 20px;
    width: 960px;
    margin: 0 auto;
}
.node
{
    text-align: right;
    padding: 2px;
    font-size: smaller;
}
.node hr {
    border: 0;
    width: 100%;
    color: #CCC;
    background-color: #CCC;
    height: 5px;
}
.section {
    padding-right: 0px;
    padding-bottom: 0px;
    padding-left: 0px;
}

h1 {
    font-size: 26px;
    font-weight: normal;
    line-height: 32px;
    margin: 32px 0 16px;
    text-align: left;
    text-transform: uppercase;
}

h2 {
    color: #9E9981 !important;
    font-size: 16px;
    line-height: 18px;
    font-weight: normal;
    margin: 16px 0 26px;
    text-align: left;
}
h3 {
    margin-top: 3px;
    margin-right: 0px;
    margin-bottom: 10px;
    margin-left: 0px;
    line-height: 20px;
    font-size: 16px;
    font-weight: normal;
}

.contents
{
    background-color: #CCC;
    padding-top: 2px;
    padding-right: 2px;
    padding-bottom: 2px;
    padding-left: 10px;
}

.index-cp
{  
background: #fff url(index-cp.png) right repeat-y;
}

.index-vr
{  
background: #fff url(index-vr.png) right repeat-y;
}

.index-mb
{  
background: #eee url(index-faq.png) right repeat-y;
}

table.border
{
	border-color: #666;
	border-width: 0px;
}

FONT.liten {font-size: 80%; }
 
.tynn {
    font-family: Arial, Helvetica, sans-serif;
    font-size: smaller;
    font-style: normal;
    font-weight: lighter;
    margin-bottom: 0em;
    font-size: 11pt;
}
.verbatim {
    color: #000;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 20px;
    margin-left: 0px;
}
.example {
    color: #000;
    width: 100%;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 20px;
    margin-left: 0px;
}
.smallexample {
    color: #000;
    padding-top: 10px;
    padding-right: 30px;
    padding-bottom: 5px;
    padding-left: 30px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
    margin-left: 0px;
}
.cartouche {
    padding: 5px;
    font-style: italic;
    font-size: 85%;
}

table.cartouche {
    border: none !important;
}

 .cartouche td  {
    background: none !important;
    border: none !important;
    padding: 5px; 

/*    background-color: #ddd;
    border: 1px solid #ccc;
    padding: 5px;*/
}

A:link { color: #2c2e70 }
A:visited { color: black }
A:active { color: #600041 }
dt em {font-weight: bold}
/* don't change this rule */    
pre.sp {
    background: none !important;   
    border:none !important
}
/* --- */
/*code hightlight*/
.red { color: #b80047; font-weight: bold; }

.blue { color: blue;  /*font-weight: bold;*/ }

.green { color: darkgreen; }

.comment { font-style: italic; }
--></style>
</head>
<body>
<h1 class="settitle">Content-Driven Policies</h1>
<div class="node">
<a name="Top"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#What-is-a-Content_002dDriven-Policy_003f">What is a Content-Driven Policy?</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#dir">(dir)</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#dir">(dir)</a>

</div>

<h2 class="unnumbered">Content-Driven Policies</h2>

<ul class="menu">
<li><a accesskey="1" href="#What-is-a-Content_002dDriven-Policy_003f">What is a Content-Driven Policy?</a>
<li><a accesskey="2" href="#Why-should-I-use-Content_002dDriven-Policies_003f">Why should I use Content-Driven Policies?</a>
<li><a accesskey="3" href="#How-do-Content_002dDriven-Policies-work-in-detail_003f">How do Content-Driven Policies work in detail?</a>
<li><a accesskey="4" href="#Can-I-make-my-own-Content_002dDiven-Policies_003f">Can I make my own Content-Diven Policies?</a>
</ul>

   <p><a href="#Contents"><h1>COMPLETE TABLE OF CONTENTS</h1></a>
<h2>Summary of contents</h2>

<div class="node">
<a name="What-is-a-Content-Driven-Policy%3f"></a>
<a name="What-is-a-Content_002dDriven-Policy_003f"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Why-should-I-use-Content_002dDriven-Policies_003f">Why should I use Content-Driven Policies?</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Top">Top</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h3 class="unnumberedsec">What is a Content-Driven Policy?</h3>

<pre class="sp">

</pre>

A Content-Driven Policy is a text file with lines containing
semi-colon separated fields, like a spreadsheet or tabular file. Each line in the file is
parsed and results in a specific type of promise being made, depending on which type the
Content-Driven Policy is. The &lsquo;<samp><span class="samp">services</span></samp>&rsquo; Content-Driven Policy is
shown below.

   <pre class="sp">

</pre>
<pre class="smallexample">     # masterfiles/cdp_inputs/service_list.txt
     
     Dnscache;stop;fix;windows
     ALG;start;warn;windows
     RemoteRegistry;start;fix;Windows_Server_2008
     
</pre>
   <pre class="sp">

</pre>

The meaning of the fields are different depending of the policy type,
but explained in the file header. With these three lines, we ensure
the correct status of three services on all our Windows machines and
are given specialized reports on the outcome. The Content-Driven
Policy services report is shown below.

   <div class="block-image"><img src="cdp_services_report.png" alt="cdp_services_report.png"></div>

<div class="node">
<a name="Why-should-I-use-Content-Driven-Policies%3f"></a>
<a name="Why-should-I-use-Content_002dDriven-Policies_003f"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#How-do-Content_002dDriven-Policies-work-in-detail_003f">How do Content-Driven Policies work in detail?</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#What-is-a-Content_002dDriven-Policy_003f">What is a Content-Driven Policy?</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h3 class="unnumberedsec">Why should I use Content-Driven Policies?</h3>

<pre class="sp">

</pre>
As seen in the example above, Content-Driven Policies are easy to write
and maintain, especially for users not very familiar with the CFEngine
language. They are designed to capture the essence of a specific,
popular use of CFEngine, and make it easier. For example, the services
Content-Driven Policy above has the following equivalent in the CFEngine
language.

<pre class="smallexample">     
     bundle agent service_example
     {
     services:
     
       "Dnscache"
         comment            =&gt; "Check services status of Dnscache",
         handle             =&gt; "srv_Dnscache_windows",
         service_policy     =&gt; "stop",
         service_method     =&gt; force_deps,
         action             =&gt; policy("fix"),
         ifvarclass         =&gt; "windows";
     
       "ALG"
         comment            =&gt; "Check services status of ALG",
         handle             =&gt; "srv_ALG_windows",
         service_policy     =&gt; "start",
         service_method     =&gt; force_deps,
         action             =&gt; policy("warn"),
         ifvarclass         =&gt; "windows";
     
       "RemoteRegistry"
         comment            =&gt; "Check services status of ALG",
         handle             =&gt; "srv_ALG_windows",
         service_policy     =&gt; "start",
         service_method     =&gt; force_deps,
         action             =&gt; policy("fix"),
         ifvarclass         =&gt; "Windows_Server_2008";
     
     }
     
</pre>
   <p>Writing this policy is clearly more time-consuming and error-prone. On
the other hand, it allows for much more flexibility than Content-Driven
Policies, when that is needed.

   <p>CFEngine provides Content-Driven Policies to cover mainstream
management tasks like the following.

     <ul>
<li>File change/difference management
<li>Service management
<li>Database management
<li>Application / script management
</ul>

<div class="node">
<a name="How-do-Content-Driven-Policies-work-in-detail%3f"></a>
<a name="How-do-Content_002dDriven-Policies-work-in-detail_003f"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Can-I-make-my-own-Content_002dDiven-Policies_003f">Can I make my own Content-Diven Policies?</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Why-should-I-use-Content_002dDriven-Policies_003f">Why should I use Content-Driven Policies?</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h3 class="unnumberedsec">How do Content-Driven Policies work in detail?</h3>

<pre class="sp">

</pre>

The text files in <code>masterfiles/cdp_inputs/</code>
(e.g. &lsquo;<samp><span class="samp">registry_list.txt</span></samp>&rsquo;) are parsed into CFEngine lists by
corresponding <code>cdp_*</code> files in <code>masterfiles/</code>
(e.g. &lsquo;<samp><span class="samp">cdp_registry.cf</span></samp>&rsquo;). It is the latter set of files that
actually implement the policies in the text files.

   <p>The Knowledge Map contains reports specifically designed to match the
Content-Driven Policies.

<div class="node">
<a name="Can-I-make-my-own-Content-Diven-Policies%3f"></a>
<a name="Can-I-make-my-own-Content_002dDiven-Policies_003f"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#How-do-Content_002dDriven-Policies-work-in-detail_003f">How do Content-Driven Policies work in detail?</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h3 class="unnumberedsec">Can I make my own Content-Diven Policies?</h3>

<pre class="sp">

</pre>

It is possible to mimic the structure of the existing Content-Driven
Policies to implement new ones, for new purposes.

   <p>However, CFEngine AS will be creating more of these best-practice
policies. Thus, making a feature request at CFEngine Support may
result in your proposal being developed and supported by professionals
at CFEngine AS. Furthermore, Knowledge Map reports currently need to
be developed induvidually by CFEngine AS.

</body></html>

