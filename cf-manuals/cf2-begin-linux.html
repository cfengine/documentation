<html lang="en">
<head>
<title>CFEngine Language Fundamentals (Unix)</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="CFEngine Language Fundamentals (Unix)">
<meta name="generator" content="makeinfo 4.12">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; }
  span.sansserif { font-family:sans-serif; font-weight:normal; }
h1, h2, a, table.list th
{
    color: #1f6e6b;
}

.node
{
background: #ddd url(Logo2-small.png) right no-repeat;
}

.menu
{
background: #eef url(menu.png) right no-repeat;
}

.contents
{
background-color: #e9f4e9;
}

.index-cp
{
background: #fff url(index-cp.png) right repeat-y;
}

.index-vr
{
background: #fff url(index-vr.png) right repeat-y;
}

.index-mb
{
background: #eee url(index-faq.png) right repeat-y;
}

table.border
{
  border-color: #4e8b8c;
  border-style: solid;
  border-width: 1px;
}

BODY {
     font-family: Verdana, Arial, Helvetica, sans-serif;
     font-style: normal;
     font-size: 11pt;
     background: #FFFFFF;
     color: #000000;
     }

P {
  font-family: Verdana, Arial, Helvetica, sans-serif;
  }

FONT.liten {font-size: 70%; }

H1, H2, H3 {
        font-weight: normal;
        color: #2c2e70;
        margin-bottom: 0em;
        }

TABLE { vertical-align: top; }

H1 { font-size: 140% }
H2 { font-size: 120% }
H3 { font-size: 110% }
H4 { font-style: italic; }

TD, TH, UL {
        font-family: Verdana, Arial, Helvetica, sans-serif;
        font-style: normal;
        }

TH { background: #9999FF;
     font-family: Verdana, Arial, Helvetica, sans-serif;
     color: blue;
  font-size: 10pt;
   }

TD { color: #000000;
     font-family: Verdana, Arial, Helvetica, sans-serif;
     font-size: 10pt;
   }

PRE { font-family: "Lucida Typewriter", "Courier", monotype;
      font-style: normal;
     font-size: 11pt;
background-color: #eee;
    }

.tynn {
        font-family: Arial, Helvetica, sans-serif;
        font-size: smaller;
        font-style: normal;
        font-weight: lighter;
        margin-bottom: 0em;
     font-size: 11pt;
        }

A:link { color: #2c2e70 }
A:visited { color: black }
A:active { color: #600041 }
--></style>
</head>
<body>
<h1 class="settitle">CFEngine Language Fundamentals (Unix)</h1>
<div class="node">
<p><hr>
<a name="Top"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Declarative-language-for-Unix_002dlike-systems">Declarative language for Unix-like systems</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#dir">(dir)</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#dir">(dir)</a>

</div>

<h2 class="unnumbered">CFEngine Language Fundamentals</h2>

   <p><a href="#Contents"><h1>COMPLETE TABLE OF CONTENTS</h1></a>

   <p><h2>Summary of contents</h2>

<!-- ********************************************************************** -->
<!-- CHAPTER -->
<!-- ********************************************************************** -->
<ul class="menu">
<li><a accesskey="1" href="#Declarative-language-for-Unix_002dlike-systems">Declarative language for Unix-like systems</a>
<li><a accesskey="2" href="#Beginners-self_002dtest">Beginners self-test</a>
</ul>

<div class="node">
<p><hr>
<a name="Declarative-language-for-Unix-like-systems"></a>
<a name="Declarative-language-for-Unix_002dlike-systems"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Beginners-self_002dtest">Beginners self-test</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Top">Top</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">1 Declarative language for Unix-like systems</h2>

<p>CFEngine is a program meant to automate the job of system
administrators. Instead of writing ad hoc custom scripts, cfengine
gives you the easy way of expressing the solution with a simple and
straight forward declarative language. The declarative language allows
you to specify a policy for cfengine to implement. For example as a
policy, an administrator may want <samp><span class="file">tmp</span></samp> directory to be emptied every
three days, may want the password file to always have the permission
<code>644</code>, ensure that Apache is up all the time etc.  Policies such as
these and many more can easily be written for cfengine to implement. A
simple code such as:

<pre class="smallexample">
     files:
      /etc/passwd  owner=root mode=644 checksum=md5 action=fixall

</pre>
   <p class="noindent">will enable cfengine to implement a password file policy without any complex script.
CFEngine makes the policy implementation easy and simple.

<!--  -->
<ul class="menu">
<li><a accesskey="1" href="#First-Program-for-Unix">First Program for Unix</a>
<li><a accesskey="2" href="#Installation-on-Unix">Installation on Unix</a>
<li><a accesskey="3" href="#The-structure-of-cfengine-declarative-language">The structure of cfengine declarative language</a>
<li><a accesskey="4" href="#Sequence-vs-Order-Unix">Sequence vs Order Unix</a>
<li><a accesskey="5" href="#Using-Variables-in-cfengine-2-Unix">Using Variables in cfengine 2 Unix</a>
<li><a accesskey="6" href="#Input_002doutput-Unix">Input-output Unix</a>
<li><a accesskey="7" href="#Escape-sequence">Escape sequence</a>
<li><a accesskey="8" href="#Selection-or-Classes">Selection or Classes</a>
<li><a accesskey="9" href="#Logical-Operators-and-classes-Unix">Logical Operators and classes Unix</a>
<li><a href="#User-Defined-Classes">User Defined Classes</a>
<li><a href="#File-and-log-rotation">File and log rotation</a>
<li><a href="#List-and-Array">List and Array</a>
<li><a href="#Recursion">Recursion</a>
<li><a href="#Methods">Methods</a>
<li><a href="#CFEngine-built-in-methods">CFEngine built in methods</a>
<li><a href="#List-and-methods">List and methods</a>
</ul>

<div class="node">
<p><hr>
<a name="First-Program-for-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Installation-on-Unix">Installation on Unix</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Declarative-language-for-Unix_002dlike-systems">Declarative language for Unix-like systems</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Declarative-language-for-Unix_002dlike-systems">Declarative language for Unix-like systems</a>

</div>

<h3 class="section">1.1 First Program for Unix</h3>

<ul class="menu">
<li><a accesskey="1" href="#CFEngine-components">CFEngine components</a>
</ul>

<div class="node">
<p><hr>
<a name="CFEngine-components"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#First-Program-for-Unix">First Program for Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#First-Program-for-Unix">First Program for Unix</a>

</div>

<h4 class="subsection">1.1.1 CFEngine components</h4>

<p>CFEngine has a number of components constituting the software. They
are <code>cfagent</code>, <code>cfexecd</code>, <code>cfservd</code>, <code>cfenvd</code>,
<code>cfkey</code>, <code>cfshow</code>, <code>cfenvgraph</code> and <code>cfrun</code>.

     <ul>
<li><code>cfagent</code> is the most important component of cfengine software. It is
the robot that interprets the user policy and implements it in a
convergent manner.
<li><code>cfexecd</code> is the component that can schedule the execution of cfengine
and inform the administrator about the results of the execution via
email.
<li><code>cfservd</code> is the server daemon component. It is responsible only two
operations, remote copy and execution. This means you don’t need
cfservd to enable cfengine work. It is only becomes necessary when
remote copy and execution are concerned.
<li><code>cfenvd</code> is used to collect statistical data about resource usage on
each for anomaly detection.
<li><code>cfkey</code> is for public and private key generation.
<li><code>cfshow</code> converts the cfengine database into ASCII  format and dump it in a file.
<li><code>cfenvgraph</code> formats the <code>cfenvd</code> database in a form that can be plotted.
<li><code>cfrun</code> allows you to request the execution of cfengine on remote hosts.
</ul>

   <p>In this document we will first concentrate on how to use
<code>cfagent</code> to implement simple policies.

<div class="node">
<p><hr>
<a name="Installation-on-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#The-structure-of-cfengine-declarative-language">The structure of cfengine declarative language</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#First-Program-for-Unix">First Program for Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Declarative-language-for-Unix_002dlike-systems">Declarative language for Unix-like systems</a>

</div>

<h3 class="section">1.2 Installation on Unix</h3>

<p>To install cfengine you need the following software packages
<pre class="smallexample">     # install

     Flex
     Bison
     Berkeley db
     CFEngine software

     # compile

     tar cfengine-2.2.8.tar
     cd cfengine-2.2.8
     ./configure
     make
     make install

</pre>
   <p class="noindent">By default cfengine executables are placed in <samp><span class="file">/usr/local/sbin</span></samp>.

<!--  -->
<div class="node">
<p><hr>
<a name="The-structure-of-cfengine-declarative-language"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Sequence-vs-Order-Unix">Sequence vs Order Unix</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Installation-on-Unix">Installation on Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Declarative-language-for-Unix_002dlike-systems">Declarative language for Unix-like systems</a>

</div>

<h3 class="section">1.3 The structure of cfengine declarative language</h3>

<p>The general structure of cfengine's declarative language is given below:
<pre class="smallexample">
     control:

      variable_1 = ( value1 value2 ... )
      variable_2 = ( value1 value2 ... )
      ...
      variable_n = ( value1 value2 ... )

     type_stanza_1:

       [<var>condition or class</var>]::

         target  attribute1=value1 attribue2=value2 ...

     type_stanza_2:

       [<var>condition or class</var>]::

         target attribute1=value1 attribue2=value2 ...

</pre>
   <p>The control stanza is a special stanza where all the variables
that will be used in the policy file are defined. The control is also
used to specify the order of execution, access control
etc. <code>variable1</code>, <code>variable2</code> are variable names. Some variables are
reserved or predefined and some are user-defined variables. The values
of the variable are specified in the parentheses.

   <p>The stanzas defines the rule type, for example <code>files</code> rule type,
<code>disk</code> rule type etc. Each stanza has an optional condition for
which the policy should be implemented. The condition or class (in
cfengine parlance) must be followed by double colon.

   <p>Within every stanza or rule type we have attributes or options and
values. Usually, such attributes are defined by cfengine. However, one
can also define new class attributes using the cfengine "defined"
keyword. For example the simple files stanza can have the following
attributes or options: owner, mode, checksum, action etc

   <p>The values of the attributes are either predefined or user
defined. For example the value for the action attribute, <code>fixall</code>, is
predefined but the value for the mode attribute <code>644</code> is user supplied.

   <p>We also have the target which specifies the object we want to apply
the policy. A target is usually a file or a directory. The combination
of target, options and value defines a policy.

   <p>In summary cfengine declarative language consist of
     <ul>
<li>One special rule type called <code>control</code>.
<li>Variables and values.
<li>Rule types or stanzas.
<li>Classes or conditions.
<li>Policies or rules.
</ul>

<!--  -->
<ul class="menu">
<li><a accesskey="1" href="#Beginner-example-1-Unix">Beginner example 1 Unix</a>
<li><a accesskey="2" href="#Beginner-example-2-Unix">Beginner example 2 Unix</a>
</ul>

<div class="node">
<p><hr>
<a name="Beginner-example-1-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Beginner-example-2-Unix">Beginner example 2 Unix</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#The-structure-of-cfengine-declarative-language">The structure of cfengine declarative language</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-structure-of-cfengine-declarative-language">The structure of cfengine declarative language</a>

</div>

<h4 class="subsection">1.3.1 Beginner example 1 (Unix)</h4>

<p>We are going to test cfengine with simple files rule type example. We
will check if a file has mode 644 if not we change it to 644

<pre class="smallexample">     #cf_ex1.conf

     control:
      actionsequence = ( files )

     files:
      /home/linux/cfengineDoc/testfile mode=644 action=fixall

     #end

</pre>
   <p>This policy specification asks cfengine to check if the target
(<samp><span class="file">testfile</span></samp>) has permission 644, if not cfengine will change the
permission to <code>644</code>. This check can be done every minute, hour depending
on what you want. It will automate the administrator's job.

   <p>We have to run cfagent to test if this policy will be implemented. We
first have to create the file testfile and change the permission to
maybe <code>777</code>. i.e <code>chmod 777 /home/linux/cfengineDoc/testfile</code>.

   <p>Now create a file called <samp><span class="file">cf_ex1.conf</span></samp> and type in the file the
policy in example 1. Enter the directory that contains
<samp><span class="file">cf_ex1.conf</span></samp> and execute the following command.

<pre class="smallexample">
     /usr/local/sbin/cfagent -vKf ./cf_ex1.conf

</pre>
   <p>Thus after the policy is written the cfagent robot is used to implement or run the policy specifications.

<p class="noindent"><samp><span class="file">/usr/local/sbin/cfagent</span></samp> is where the cfengine agent is located and <code>-v</code>
is for verbose output, <code>-K</code> is a command to force the immediate implementation of
policy and <code>-f</code> is used to specify the file which contains the policy
configuration. The policy configuration file is found in
<samp><span class="file">cf_ex1.conf</span></samp>. By default cfagent runs every 1 minute and if that time
is not elapsed since the last run the current configuration will not
be executed so K option is used to override this default behavior.

   <p>In example 1 the actionsequence variable (directive or command) has
the value <code>files</code>. The value of the actionsequenece variable is placed
in parentheses. There should a space before and after the variable
value like this: <code>( files )</code>.

   <p>The values of actionsequance represents the rule type and the sequence
of execution. The sequence of execution is simply first come first
serve. E.g actionsequenece = ( files shellcommands ) means the files
command must be executed before the shellcommnds. The files stanza or
rule type has the target <samp><span class="file">testfile</span></samp> (the full path of the file
should be specified) and attributes or options of the files are mode
and action and the values are <code>644</code> and <code>fixall</code> respectively.

<!--  -->
<div class="node">
<p><hr>
<a name="Beginner-example-2-Unix"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Beginner-example-1-Unix">Beginner example 1 Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-structure-of-cfengine-declarative-language">The structure of cfengine declarative language</a>

</div>

<h4 class="subsection">1.3.2 Beginner example 2 (Unix)</h4>

<p>This example adds a shellcommand to example 1 and executes it from cfengine

<pre class="smallexample">     #cf_ex2.conf

     control:

      actionsequence = ( files shellcommands )

     files:

      /home/linux/cfengineDoc/testfile mode=u+rxw action=fixall

     shellcommands:

       "/bin/echo ...second cfengine script ..."

     #end

</pre>
   <!--  -->
<div class="node">
<p><hr>
<a name="Sequence-vs-Order-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Using-Variables-in-cfengine-2-Unix">Using Variables in cfengine 2 Unix</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#The-structure-of-cfengine-declarative-language">The structure of cfengine declarative language</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Declarative-language-for-Unix_002dlike-systems">Declarative language for Unix-like systems</a>

</div>

<h3 class="section">1.4 Sequenece vs ordering</h3>

<p>The order in which you write the rule types in cfengine doesn't always affect
the sequence of execution. For example, example 2 can be rewritten as

<pre class="smallexample">
     #cf_ex2a.conf control: actionsequence = ( files shellcommands )
     shellcommands: "/bin/echo ...second cfengine script ..."  files:
     /home/linux/cfengineDoc/testfile mode=644 action=fixall #end

</pre>
   <p>The results will be the same. The <code>files</code> rule type will be executed
first followed by <code>shellcommands</code> since the actionsequence specifies
so. So the bulk sequence is specified by the <code>actionsequence</code> but the order
of rules does not matter.

<!--  -->
<div class="node">
<p><hr>
<a name="Using-Variables-in-cfengine-2-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Input_002doutput-Unix">Input-output Unix</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Sequence-vs-Order-Unix">Sequence vs Order Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Declarative-language-for-Unix_002dlike-systems">Declarative language for Unix-like systems</a>

</div>

<h3 class="section">1.5 Using Variables in cfengine 2 (Unix)</h3>

<p>Variables allow us to store data in memory for processing. Variables are
declared in cfengine as follows:

<pre class="smallexample">
      name = ( value1, value2 ... )

</pre>
   <p>The name can be any name that follows the general programming
standard. The name can also be a predefined name to set the value of a
reserved control parameter. Example 3 shows how to
work with cfengine variables.

<!--  -->
<ul class="menu">
<li><a accesskey="1" href="#Beginner-example-3-Unix">Beginner example 3 Unix</a>
<li><a accesskey="2" href="#Beginner-example-4-Unix">Beginner example 4 Unix</a>
</ul>

<div class="node">
<p><hr>
<a name="Beginner-example-3-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Beginner-example-4-Unix">Beginner example 4 Unix</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-Variables-in-cfengine-2-Unix">Using Variables in cfengine 2 Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Variables-in-cfengine-2-Unix">Using Variables in cfengine 2 Unix</a>

</div>

<h4 class="subsection">1.5.1 Beginner example 3 (Unix)</h4>

<pre class="smallexample">
     #cf_ex3.conf

      control:

        actionsequence = ( shellcommands )

         hello = ( "hello cfengine " )  #hello variable

      shellcommands:

        "/bin/echo ..$(hello).."

</pre>
<p class="noindent">This code declares the <code>hello</code> variable and assigns the value "hello
cfengine". We then use shellcommands stanza to display the value of
the variables. The code <code>$(hello)</code> shows how cfengine reference
variable. There are two ways of referencing cfengine variables. We can
reference a variable with parenthesis or curly braces. For example
<code>$(hello)</code> can rewritten as <code>${hello}</code>.

<!--  -->
<div class="node">
<p><hr>
<a name="Beginner-example-4-Unix"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Beginner-example-3-Unix">Beginner example 3 Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Variables-in-cfengine-2-Unix">Using Variables in cfengine 2 Unix</a>

</div>

<h4 class="subsection">1.5.2 Beginner example 4 (Unix)</h4>

<pre class="smallexample">
     #cf_ex4.conf

      control:

        actionsequence = ( shellcommands )

         hello = ( "hello cfengine " )  #hello variable

      shellcommands:

        "/bin/echo ..${hello}.."

</pre>
   <p>Example 4 will produce the same result as example 3. The only
difference is that the parenthesis is changed to a curly brace i.e.
<code>${hello}</code>.

<!--  -->
<div class="node">
<p><hr>
<a name="Input-output-Unix"></a>
<a name="Input_002doutput-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Escape-sequence">Escape sequence</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-Variables-in-cfengine-2-Unix">Using Variables in cfengine 2 Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Declarative-language-for-Unix_002dlike-systems">Declarative language for Unix-like systems</a>

</div>

<h3 class="section">1.6 Input-output (Unix)</h3>

<p>The value of a variable can be specified in the cfengine
configuration file or read from a file. Example 5 reads data from a
file and stores it in a variable.

<ul class="menu">
<li><a accesskey="1" href="#Beginner-example-5-Unix">Beginner example 5 Unix</a>
</ul>

<div class="node">
<p><hr>
<a name="Beginner-example-5-Unix"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Input_002doutput-Unix">Input-output Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Input_002doutput-Unix">Input-output Unix</a>

</div>

<h4 class="subsection">1.6.1 Beginner example 5 (Unix)</h4>

<pre class="smallexample">
     #cf_ex5.conf

      control:

        actionsequence = ( shellcommands )

        data = ( ReadFile(/home/linux/cfengineDoc/data.txt,100) )

      shellcommands:

       "/bin/echo ..$(data).."

</pre>
   <p>This example reads data from the file <code>data.txt</code> using the cfengine
<code>ReadFile</code> method. The output is stored in the variable data and the
result displayed by <code>shellcommands</code>. The <code>ReadFile()</code> method has two
parameters, the file name and the (maximum) number of characters to be read.

<!--  -->
<div class="node">
<p><hr>
<a name="Escape-sequence"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Selection-or-Classes">Selection or Classes</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Input_002doutput-Unix">Input-output Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Declarative-language-for-Unix_002dlike-systems">Declarative language for Unix-like systems</a>

</div>

<h3 class="section">1.7 Escape Sequence</h3>

<p>Special keys such as tab, newline etc, can also be represented in
cfengine to format output. The following are the some of the escape
sequence.

     <ul>
<li><code>cr</code> - Expands to the carriage-return character.
<li><code>dblquote</code> - Expands to a double quote <code>"</code>.
<li><code>dollar</code> - Expands to <code>$</code>.
<li><code>lf</code> - Expands to a line-feed character.
<li><code>n</code> - Expands to a newline character.
<li><code>quote</code> - Expands to a single quote <code>'</code>.
<li><code>spc</code> - Expands simply to a single space. This can be used to place spaces in filenames etc.
<li><code>tab</code> - Expands to a single tab character.
</ul>

<!--  -->
<ul class="menu">
<li><a accesskey="1" href="#Beginner-example-5a-Unix">Beginner example 5a Unix</a>
</ul>

<div class="node">
<p><hr>
<a name="Beginner-example-5a-Unix"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Escape-sequence">Escape sequence</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Escape-sequence">Escape sequence</a>

</div>

<h4 class="subsection">1.7.1 Beginner xample 5a (UNix)</h4>

<pre class="smallexample">
     #cf_ex5a.conf

      control:

        actionsequence = ( shellcommands )

      alerts:

        linux::

            "The car cost $(n) $(dollar)20,000 "

</pre>
<pre class="smallexample">
     The output will be:
     The car cost
     $20,000

</pre>
   <div class="node">
<p><hr>
<a name="Selection-or-Classes"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Logical-Operators-and-classes-Unix">Logical Operators and classes Unix</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Escape-sequence">Escape sequence</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Declarative-language-for-Unix_002dlike-systems">Declarative language for Unix-like systems</a>

</div>

<h3 class="section">1.8 Selection or Classes</h3>

<p>Selection or classes allow a program to decide which code to
execute. In cfengine such commands are called classes. There are no <code>if</code>
statement in cfengine, only classes.  By default cfengine classifies
the system environment and used the results to make decisions. The
classes are Boolean with true or false values. We can see the default
or defined classes by running cfagent <code>-vp</code> command. You also see the
defined classes when you run cfagent <code>-vf ./filename</code>.

<pre class="smallexample">
     Defined Classes = ( 192_168_189 192_168_189_128 32_bit Day16 Hr10
     Hr10_Q2 July Min15_20 Min19 Q2 Wednesday Yr2008 any cfengine_2
     cfengine_2_2 cfengine_2_2_7 compiled_on_linux_gnu debian
     fe80__20c_29ff_fec4_f41c i686 ipv4_192 ipv4_192_168 ipv4_192_168_189
     ipv4_192_168_189_128 linux linux_2_6_24_19_generic linux_i686
     linux_i686_2_6_24_19_generic
     linux_i686_2_6_24_19_generic__1_SMP_Wed_Jun_18_14_43_41_UTC_2008
     linux_local lsb_compliant net_iface_eth0 ubuntu ubuntu_8 ubuntu_8_4
     ubuntu_hardy undefined_domain )
</pre>
   <p>Users can also define their own classes to use for decision making.

<!--  -->
<ul class="menu">
<li><a accesskey="1" href="#Beginner-example-6-Unix">Beginner example 6 Unix</a>
<li><a accesskey="2" href="#Example-7">Example 7</a>
</ul>

<div class="node">
<p><hr>
<a name="Beginner-example-6-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Example-7">Example 7</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Selection-or-Classes">Selection or Classes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Selection-or-Classes">Selection or Classes</a>

</div>

<h4 class="subsection">1.8.1 Beginner example 6 (Unix)</h4>

<p>This example displays the message "...cfengine classes in action.." if
the operating system of my system is Linux. CFEngine will check if
<code>linux</code> is part of the defined classes and displays the message
accordingly.

<pre class="smallexample">
     #cf_ex6.conf

      control:

      alerts:

         linux::

            "..cfengine classes in action.."

</pre>
   <p>We can have two or more classes as shown in example 7

<!--  -->
<div class="node">
<p><hr>
<a name="Example-7"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Beginner-example-6-Unix">Beginner example 6 Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Selection-or-Classes">Selection or Classes</a>

</div>

<h4 class="subsection">1.8.2 Example 7</h4>

<pre class="smallexample">     #cf_ex7.conf

      control:

      alerts:

        linux::
            "..cfengine classes in action..linux"

        SuSE::
             "..cfengine classes in action..suse"

</pre>
   <p>CFEngine will display only the linux message since there is no <code>SuSE</code> class in the defined classes above.

<!--  -->
<div class="node">
<p><hr>
<a name="Logical-Operators-and-classes-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#User-Defined-Classes">User Defined Classes</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Selection-or-Classes">Selection or Classes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Declarative-language-for-Unix_002dlike-systems">Declarative language for Unix-like systems</a>

</div>

<h3 class="section">1.9 Logical Operators and classes (Unix)</h3>

<p>Logical operators are use to combine conditional statements or
classes. For example we can check if a distribution is either Ubuntu or SuSE,
the distribution is SuSE and the time is quarter past two and so on.
CFEngine has the following  logical operators:

     <ul>
<li>OR   &mdash; <code>|</code> or <code>||</code>.
<li>AND  &mdash; <code>&amp;</code> or <code>.</code> (dot).
<li>NOT  &mdash; <code>!</code>
<li>Grouping &mdash;  <code>( )</code>
</ul>

<!--  -->
<ul class="menu">
<li><a accesskey="1" href="#Beginner-example-8-Unix">Beginner example 8 Unix</a>
<li><a accesskey="2" href="#Beginner-example-9-Unix">Beginner example 9 Unix</a>
<li><a accesskey="3" href="#Beginner-example-10-Unix">Beginner example 10 Unix</a>
</ul>

<div class="node">
<p><hr>
<a name="Beginner-example-8-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Beginner-example-9-Unix">Beginner example 9 Unix</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Logical-Operators-and-classes-Unix">Logical Operators and classes Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Logical-Operators-and-classes-Unix">Logical Operators and classes Unix</a>

</div>

<h4 class="subsection">1.9.1 Beginner example 8 (Unix)</h4>

<pre class="smallexample">     #cf_ex8.conf

      control:

      alerts:

         redhat.SuSE::

            "..cfengine classes in action.."
</pre>
   <p>The output is nothing, as the condition can never be satisfied.

   <p>Example 8 shows the combination of two classes <code>redhat</code> and
<code>SuSE</code>. <code>redhat.SuSE</code> means if the distribution is redhat and SuSE display
the "cfengine classes in action". Since a distribution cannot be both
redhat and SuSE the results is nothing.

<!--  -->
<div class="node">
<p><hr>
<a name="Beginner-example-9-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Beginner-example-10-Unix">Beginner example 10 Unix</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Beginner-example-8-Unix">Beginner example 8 Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Logical-Operators-and-classes-Unix">Logical Operators and classes Unix</a>

</div>

<h4 class="subsection">1.9.2 Beginner example 9 (Unix)</h4>

<pre class="smallexample">      #cf_ex9.conf

      control:

      alerts:

        redhat|SuSE::

          "..cfengine classes in action.."
</pre>
   <p>This means if the distribution is either <code>redhat</code> or <code>SuSE</code> display the message.

<!--  -->
<div class="node">
<p><hr>
<a name="Beginner-example-10-Unix"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Beginner-example-9-Unix">Beginner example 9 Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Logical-Operators-and-classes-Unix">Logical Operators and classes Unix</a>

</div>

<h4 class="subsection">1.9.3 Beginner example 10 (Unix)</h4>

<pre class="smallexample">
     #cf_ex10.conf

      control:

      alerts:

         !redhat|Hr10::

            "..cfengine classes in action.."
</pre>
   <p>This means if distribution is not <code>redhat</code> or the hour is 10am display the results.

<!--  -->
<div class="node">
<p><hr>
<a name="User-Defined-Classes"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#File-and-log-rotation">File and log rotation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Logical-Operators-and-classes-Unix">Logical Operators and classes Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Declarative-language-for-Unix_002dlike-systems">Declarative language for Unix-like systems</a>

</div>

<h3 class="section">1.10 User Define Classes</h3>

<p>It is possible to define your own class using the define keyword or classes rule type.

<ul class="menu">
<li><a accesskey="1" href="#Example-11">Example 11</a>
<li><a accesskey="2" href="#Beginner-Example-12-Unix">Beginner Example 12 Unix</a>
<li><a accesskey="3" href="#Beginner-example-13-Unix">Beginner example 13 Unix</a>
<li><a accesskey="4" href="#Beginner-Example-14">Beginner Example 14</a>
</ul>

<div class="node">
<p><hr>
<a name="Example-11"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Beginner-Example-12-Unix">Beginner Example 12 Unix</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#User-Defined-Classes">User Defined Classes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#User-Defined-Classes">User Defined Classes</a>

</div>

<h4 class="subsection">1.10.1 Example 11</h4>

<pre class="smallexample">
     #cf_ex11.conf   User define classes and sequence

     control:

      classes:

         Check = ( FileExists(/home/linux/cf) )

     alerts:

        Check::

           "yes"
</pre>
   <p>This example defines the class <code>Check</code> using the classes rule type. The
method <code>FileExists()</code> is cfengine method which check whether or not a
file exists. The value of the class <code>Check</code> is true if the file <samp><span class="file">cf</span></samp> is
found in <samp><span class="file">/home/linux</span></samp> directory. The output of the policy will be `yes'
if the file is found.

<!--  -->
<div class="node">
<p><hr>
<a name="Beginner-Example-12-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Beginner-example-13-Unix">Beginner example 13 Unix</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Example-11">Example 11</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#User-Defined-Classes">User Defined Classes</a>

</div>

<h4 class="subsection">1.10.2 Beginner Example 12 (Unix)</h4>

<p>Sometimes you may want cfengine to be aware of your user defined class
before it is used. We do this by using the <code>AddInstallable</code> method.

<pre class="smallexample">     #cf_ex12.conf   User define classes and sequence

     control:

       #add class that might become define at run time
       AddInstallable = ( Check )

     classes:

       Check = ( FileExists(/home/linux/cf) )

     alerts:

        Check::
         "yes"
</pre>
   <!--  -->
<div class="node">
<p><hr>
<a name="Beginner-example-13-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Beginner-Example-14">Beginner Example 14</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Beginner-Example-12-Unix">Beginner Example 12 Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#User-Defined-Classes">User Defined Classes</a>

</div>

<h4 class="subsection">1.10.3 Beginner example 13 (Unix)</h4>

<p>User defined classes can be define at runtime. Example 13 shows how
this is done

<pre class="smallexample">
     #cf_ex13.conf
     #User define classes and sequence

     control:
         actionsequence = ( files )
         #add class that might become define at run time
         #the order of usage is not important
         AddInstallable  = ( RCheck )

     files:
       RCheck::   #RCheck is true
         /home/linux/cfengineDoc/test mode=700 action=fixall

     files:
          #define stores the outcome of execution
          #if mode is not 777 then change to 777 and set RCheck to true

         /home/linux/cfengineDoc/test1 mode=777 action=fixall define=RCheck
</pre>
   <p>This example uses the outcome of results in the second stanza (<samp><span class="file">test1</span></samp>)
to fix the file permission for the <samp><span class="file">test</span></samp> file. The entire policy
reads like this, if the file permission for <samp><span class="file">test1</span></samp> file is not <code>777</code>
and the action is taken to change it to <code>777</code> then change the permission
of the <samp><span class="file">test</span></samp> file to <code>700</code>. The order is not important; the right
instruction will be executed.

<!--  -->
<div class="node">
<p><hr>
<a name="Beginner-Example-14"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Beginner-example-13-Unix">Beginner example 13 Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#User-Defined-Classes">User Defined Classes</a>

</div>

<h4 class="subsection">1.10.4 Beginner Example 14 (Unix)</h4>

<pre class="smallexample">     #User define classes
     control:
       #add class that might become define at run time
        actionsequence = ( files )
        AddInstallable = ( WinXP Indigo )

     files:

      Indigo::

        /usr/etc/resolv.conf owner=root action=warn

     classes:
       #list of classes of pcs
       WinXP  = ( pc121 pc122 linux )

       #-box2 and -box4 not part
       Indigo  = ( irix -box2 -box4 )

      #if file exist

       RCheck = ( FileExists(/home/linux/cfengineDoc/sequence) )

     files:

          RCheck.WinXP::
          /home/linux/cfengineDoc/test mode=600 action=fixall
</pre>
<!--  -->
<div class="node">
<p><hr>
<a name="File-and-log-rotation"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#List-and-Array">List and Array</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#User-Defined-Classes">User Defined Classes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Declarative-language-for-Unix_002dlike-systems">Declarative language for Unix-like systems</a>

</div>

<h3 class="section">1.11 File and log rotation</h3>

<p>An example of a useful maintenance procedure which prevents system
failure is log rotation.  We can do this task by using the <code>disable</code>
stanza. Disabling a file means renaming it so that it becomes
harmless. This feature is useful if you want to prevent certain
dangerous files from being around, but you don't want to delete them
— a deleted file cannot be examined later. The main syntax is

<pre class="smallexample">
         disable:
            class::
               /filename
                  dest=filename
     	     type=plain/file/link/links
     	     rotate=empty/truncate/numerical-value
     	     size=numerical-value
     	     define=classlist

</pre>
   <p>If a destination filename is specified, cfagent renames the source
file to the destination, where possible (renaming across filesystems
is not allowed). If no destination is given, cfagent renames a given
file by appending the name of the file with the suffix
<samp><span class="file">.cfdisabled</span></samp>. Note that directories are only renamed if they have a
specific destination specified.

   <p>A typical example of a file you would probably want to disable would
be the <samp><span class="file">/etc/hosts.equiv</span></samp> file which is often found with the
&lsquo;<samp><span class="samp">+</span></samp>&rsquo; symbol written in it, opening the system concerned to the
entire NIS universe without password protection! Here is an example:

<!--  -->
<ul class="menu">
<li><a accesskey="1" href="#Beginner-Example-16">Beginner Example 16</a>
</ul>

<div class="node">
<p><hr>
<a name="Beginner-Example-16"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#File-and-log-rotation">File and log rotation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#File-and-log-rotation">File and log rotation</a>

</div>

<h4 class="subsection">1.11.1 Beginner Example 16 (Unix)</h4>

<pre class="smallexample">     	     disable:
     	           /etc/hosts.equiv
     	           /etc/nologin
     	           /usr/lib/sendmail.fc

                  sun4::
     	           /var/spool/cron/at.allow

</pre>
<p class="noindent">Disabling a link deletes the link. If you wish you may use the optional syntax
<pre class="smallexample">     	     disable:
     	         /directory/name type=file
</pre>
   <p class="noindent">in order to specify that a file object should only be disabled if it is a plain
file. The optional element type= can take the values plain, file, link
or links. If one of these is specified, cfengine checks the type and
only disables the object if there is a match. This allows you to
disable a file and replace it by a link to another file for
instance. NOTE that if you regularly disable a file which then gets
recreated by some process, the disabled file filename. cfdisabled will
be overwritten each time cfengine disables the file and therefore the
contents of the original are lost each time. The rotate facility was
created for just this contingency. The disable feature can be used to
control the size of system log files, such as <samp><span class="file">/var/adm/messages</span></samp>
using a further option rotate. If the value rotate is set to 4, say,
<pre class="smallexample">     	      disable:
     	         filename  rotate=4
</pre>
   <p class="noindent">then cfengine renames the file concerned by appending `.1' to it and a
new, empty file is created in its place with the same owner and
permissions. The next time disable is executed `.1' is renamed to `.2'
and the file is renamed `.1' and a new empty file is created with the
same permissions. CFEngine continues to rotate the files like this
keeping a maximum of four files. This is similar to the behaviour of
syslog.  If you simply want to empty the contents of a log file,
without retaining a copy then you can use rotate=empty or
rotate=truncate. For instance, to keep control of your World Wide Web
server logs:
<pre class="smallexample">
        disable:
            Sunday|Wednesday::
                /usr/local/httpd/logs/access_log  rotate=empty
</pre>
   <p>This keeps a running log which is emptied each Sunday and
Wednesday. The size= option in disable allows you to carry out a
disable operation only if the size of the file is less than, equal to
or greater than some specified size. Sizes are in bytes by default,
but may also be quoted in kilobytes or megabytes using the notation:

<pre class="smallexample">     	     numberbytes
     	     numberkbytes
     	     numbermbytes
</pre>
   <p>Only the first characters of these strings are significant, so they
may be written however is convenient: e.g. 14kB, 14k, 14kilobytes
etc. Examples are:

<pre class="smallexample">                     size=&lt;400  # disable if file size is &lt; 400 bytes
     	        size=400   # disable if file size is equal to 400 bytes
     	        size=&gt;400  # disable if file size &gt; 400 bytes
</pre>
   <p>This options works with rotate or normal disabling; it is just an
extra condition which must be satisfied. If a disable command results
in action being taken by cfengine, an optional list of classes becomes
can be switched on with the aid of a statement define=classlist in
order to trigger knock-on actions.  The repository declaration allows
a local override of the Repository variable, on an item by item
basis. If set to “off” or “none” it cancels the value of a global
repository and leaves the disabled file in the same directory.

<!--  -->
<div class="node">
<p><hr>
<a name="List-and-Array"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Recursion">Recursion</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#File-and-log-rotation">File and log rotation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Declarative-language-for-Unix_002dlike-systems">Declarative language for Unix-like systems</a>

</div>

<h3 class="section">1.12 List and Array</h3>

<p>CFEngine list allows you to specify a list of items which can be
treated as a single variables. A list can be any set of names, file
names etc. The example 22 shows how to create a list.

<ul class="menu">
<li><a accesskey="1" href="#Beginner-example-22-Unix">Beginner example 22 Unix</a>
<li><a accesskey="2" href="#Beginner-example-23-Unix">Beginner example 23 Unix</a>
<li><a accesskey="3" href="#Beginner-example-23a-Unix">Beginner example 23a Unix</a>
</ul>

<div class="node">
<p><hr>
<a name="Beginner-example-22-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Beginner-example-23-Unix">Beginner example 23 Unix</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#List-and-Array">List and Array</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#List-and-Array">List and Array</a>

</div>

<h4 class="subsection">1.12.1 Beginner example 22 (Unix)</h4>

<pre class="smallexample">      control:
        alist = ( "one:two:three:four:five" )

      alerts:
        linux::
          " $(alist)"

</pre>
   <p>By default a list should be separated by colon. This can be change using the <code>Split</code> option.
<a name="index-Split-1"></a>
<div class="node">
<p><hr>
<a name="Beginner-example-23-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Beginner-example-23a-Unix">Beginner example 23a Unix</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Beginner-example-22-Unix">Beginner example 22 Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#List-and-Array">List and Array</a>

</div>

<h4 class="subsection">1.12.2 Beginner example 23 (Unix)</h4>

<pre class="smallexample">     control:

        Split = ( , )

        alist = ( "one,two,three,four,five" )

     alerts:

      linux::

        " $(alist)"
</pre>
   <p>The <code>Split</code> allows us to change the default colon to comma.

<pre class="smallexample">     control:

       Split = ( " " )
       mylist = ( "mark ricky bad-dude" )

     tidy:

       /mnt/home1/$(mylist) pattern=*.cfsaved age=1

</pre>
   <!--  -->
<div class="node">
<p><hr>
<a name="Beginner-example-23a-Unix"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Beginner-example-23-Unix">Beginner example 23 Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#List-and-Array">List and Array</a>

</div>

<h4 class="subsection">1.12.3 Beginner example 23a (Unix)</h4>

<pre class="smallexample">
     control:

       Split = ( , )
       alist = ( "one,two,three,four,five" )

     alerts:

      redhat::

        " $(alist)"
</pre>
   <p>Example 23b:
<pre class="smallexample">
     control:
        Split = ( " " )
        mylist = ( "mark ricky bad-dude" )
     tidy:
        /linux/home/$(mylist) pattern=*.cfsaved age=1
</pre>
   <p>In this example cfengine will iterate and substitute mylist with each
of the elements of in the list. It will then delete all <samp><span class="file">.cfsaved</span></samp> file
which is a day old in each of the directory.

   <p>The power of lists is made clear when supplied as a parameter to a
method (see below).

<!--  -->
<div class="node">
<p><hr>
<a name="Recursion"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Methods">Methods</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#List-and-Array">List and Array</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Declarative-language-for-Unix_002dlike-systems">Declarative language for Unix-like systems</a>

</div>

<h3 class="section">1.13 Recursion</h3>

<p>Recursion is used to iterate over a directory of files and
subdirectories. The keyword for recursion is <code>recurse</code> (from the
anonymous saying: to iterate is human, to recurse is divine). The
value of recurse is from <code>0</code> to <code>inf</code> (infinity). Where 0
means only current directory container, 1 includes the files in the
current directory and infinity means everything in the directory
including subdirectories.

<!--  -->
<ul class="menu">
<li><a accesskey="1" href="#Beginner-example-23c-Unix">Beginner example 23c Unix</a>
</ul>

<div class="node">
<p><hr>
<a name="Beginner-example-23c-Unix"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Recursion">Recursion</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Recursion">Recursion</a>

</div>

<h4 class="subsection">1.13.1 Beginner example 23c (Unix)</h4>

<pre class="smallexample">
     control:

      actionsequence = ( files )

     files:

      /home/linux/cfengineDoc mode=644 action=fixall recurse=inf

</pre>
<p class="noindent">This example means change the mode of everything in the directory <samp><span class="file">cfengineDoc</span></samp> to <code>644</code>.
<pre class="smallexample">
     control:

      actionsequence = ( files )

     files:

      /home/linux/cfengineDoc mode=644 action=fixall recurse=2

</pre>
   <p class="noindent">This example means change the mode of directory and subdirectory to <code>644</code>.

<!--  -->
<div class="node">
<p><hr>
<a name="Methods"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#CFEngine-built-in-methods">CFEngine built in methods</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Recursion">Recursion</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Declarative-language-for-Unix_002dlike-systems">Declarative language for Unix-like systems</a>

</div>

<h3 class="section">1.14 Methods</h3>

<p>A method is a set of instructions that achieve a specific task. It is
possible to encapsulate tasks using cfengine methods. Methods in cfengine
are defined as ordinary cfengine configuration files with some extra
control information:

<pre class="smallexample">     control

      MethodName = ( <var>name</var> )
      MethodParameters = ( <var>p1 p2 ...</var> )

      <var>method-body</var> ...

</pre>
   <p>The <code>MethodName</code> directive is use to specify the method name and the
MethodParameters specifies the parameters. The number of parameters
can zero or more. The method body is the usual cfengine policy
code. It is not different from what we know so far. We begin with a
simple method that displays a message.

<!--  -->
<ul class="menu">
<li><a accesskey="1" href="#Beginner-example-14-Unix">Beginner example 14 Unix</a>
<li><a accesskey="2" href="#Beginner-example-15-Unix">Beginner example 15 Unix</a>
<li><a accesskey="3" href="#Beginner-example-16-Unix">Beginner example 16 Unix</a>
<li><a accesskey="4" href="#Beginner-example-17-Unix">Beginner example 17 Unix</a>
<li><a accesskey="5" href="#Method-and-return-value">Method and return value</a>
<li><a accesskey="6" href="#Beginner-example-18-Unix">Beginner example 18 Unix</a>
<li><a accesskey="7" href="#Beginner-example-19-Unix">Beginner example 19 Unix</a>
<li><a accesskey="8" href="#Beginner-example-20-Unix">Beginner example 20 Unix</a>
</ul>

<div class="node">
<p><hr>
<a name="Beginner-example-14-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Beginner-example-15-Unix">Beginner example 15 Unix</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Methods">Methods</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Methods">Methods</a>

</div>

<h4 class="subsection">1.14.1 Beginner example 14 (Unix)</h4>

<pre class="smallexample">
     #cf_ex14.conf   User define classes and sequence

     control:

       MethodName = ( UserClass )

     classes:

       Check = ( FileExists(/home/linux/cf) )

     alerts:

        Check::
         "Yes the cf exist"

       !Check::
          "No, cf does not exist"

</pre>
<p class="noindent">This method checks if the file cf exist and display a message. The
method is called <code>UserClass</code> and has no parameter. In cfengine it is
required that a method is placed in a special directory called
modules. The default location of this directory is <samp><span class="file">/var/cfengine</span></samp>. So
if you install cfengine with default dicrectory then you must copy the
file <samp><span class="file">cf_ex14.conf</span></samp> into it <samp><span class="file">/var/cfengine/modules</span></samp> directory. The next
step is to create a method call configuration file to make use of the
method as in example 14.

<!--  -->
<div class="node">
<p><hr>
<a name="Beginner-example-15-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Beginner-example-16-Unix">Beginner example 16 Unix</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Beginner-example-14-Unix">Beginner example 14 Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Methods">Methods</a>

</div>

<h4 class="subsection">1.14.2 Beginner example 15 (Unix)</h4>

<pre class="smallexample">
     #cf_ex15.conf

     control:

       actionsequence = ( methods )

     methods:

       UserClass(void)
         action=cf_ex14.conf #include the method here
         returnvars=null  #no return value
         server=localhost #run the method on local machine

</pre>
   <p>Example 15 is the method call's configuration file. The method call has
the <code>methods</code> rule type. It is used to call the method. Under methods
rule type we call the method by name. Since our method has no
parameters we supply void as parameter entry. The <code>action</code> directive now
specifies which file contains the method. The <code>returnvars</code> allows the
return value to be store and reuse it later. Our method has no return
type so the value of return type is null. The server attribute or
option allows you to specify which host will run the method. Here we
chose localhost.

   <p>The next example shows how to use parameter in methods.

<div class="node">
<p><hr>
<a name="Beginner-example-16-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Beginner-example-17-Unix">Beginner example 17 Unix</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Beginner-example-15-Unix">Beginner example 15 Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Methods">Methods</a>

</div>

<h4 class="subsection">1.14.3 Beginner example 16 (Unix)</h4>

<pre class="smallexample">
     #cf_ex16.conf   User define classes and sequence

     control:

       MethodName = ( UserClass )
       MethodParameters = ( filename )
          #add class that might become define at run time
           AddInstallable = ( Check )
     classes:

       Check = ( FileExists("/home/linux/$(filename)") )

     alerts:

        Check::
         "Yes the cf exists"
       !Check::
          "No, cf does not exists"

</pre>
   <p>This method performs the same task as example 15 however the file name
will not be fix but vary. The name will now be supplied at method
call. Example 17 is the method call for example 16. Note that the file
path is in double quote.

<!--  -->
<div class="node">
<p><hr>
<a name="Beginner-example-17-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Method-and-return-value">Method and return value</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Beginner-example-16-Unix">Beginner example 16 Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Methods">Methods</a>

</div>

<h4 class="subsection">1.14.4 Beginner example 17 (Unix)</h4>

<pre class="smallexample">
     control:

      actionsequence = ( methods )

     methods:

      UserClass(cf)

        action=cf_ex16.conf
        returnvars=null
        server=localhost

</pre>
   <p>This example calls the method <code>UserClass</code> and supply the parameter
cf. The cf will replace the variable or parameter <samp><span class="file">filename</span></samp> so that
the file path checked will be <samp><span class="file">/home/linux/cf</span></samp>. As usual the action option
specifies the file which contains the method. The method file must be
located in the modules directory. Note that the method call
configuration file should not be in the modules directory, but in the usual
inputs directory.

<!--  -->
<div class="node">
<p><hr>
<a name="Method-and-return-value"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Beginner-example-18-Unix">Beginner example 18 Unix</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Beginner-example-17-Unix">Beginner example 17 Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Methods">Methods</a>

</div>

<h4 class="subsection">1.14.5 Method and return value</h4>

<p>A method can return a value which could be used for further
operation. In this case the return value will not be null. Example 18
illustrates how this could be done.

<!--  -->
<div class="node">
<p><hr>
<a name="Beginner-example-18-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Beginner-example-19-Unix">Beginner example 19 Unix</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Method-and-return-value">Method and return value</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Methods">Methods</a>

</div>

<h4 class="subsection">1.14.6 Beginner example 18 (Unix)</h4>

<pre class="smallexample">     #cf_ex18.conf   User define classes and sequence

     control:

        MethodName = ( ReturnName )
       MethodParameters = ( filename )

     classes:
        every = ( any )

     alerts:
       every::
        ReturnVariables("$(filename)")

</pre>
   <p>This method just accepts a file name and returns the same name. The
<code>alerts</code> rule type is needed to return the results. The method call for
example 18 is shown below.

<!--  -->
<div class="node">
<p><hr>
<a name="Beginner-example-19-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Beginner-example-20-Unix">Beginner example 20 Unix</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Beginner-example-18-Unix">Beginner example 18 Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Methods">Methods</a>

</div>

<h4 class="subsection">1.14.7 Beginner example 19 (Unix)</h4>

<pre class="smallexample">
     control:

       actionsequence = ( methods )

     methods:

       ReturnName(cf)
         action=cf_ex18.conf
         returnvars=results
         server=localhost

     classes:
        every = ( any )

     alerts:

       every::

        "The file name is $(ReturnName.results)"

</pre>
   <p>Here the <code>returnvars</code> value is results. This means the file name being
returned by the method will be stored in the variable results. We then
use the alerts command to display the file name. The results variable
is accessed using the name of the method name.

<!--  -->
<div class="node">
<p><hr>
<a name="Beginner-example-20-Unix"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Beginner-example-19-Unix">Beginner example 19 Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Methods">Methods</a>

</div>

<h4 class="subsection">1.14.8 Beginner example 20 (Unix)</h4>

<p>This example shows how to use more than one parameters in cfengine method.
<pre class="smallexample">     #cf_ex20.conf   User define classes and sequence

     control:

       actionsequence = ( editfiles )
       MethodName = ( EditMethod )
       MethodParameters = ( filename data )

     editfiles:

      { /home/linux/$(filename)

      AppendIfNoSuchLine "$(data)"
      }

     classes:
        every = ( any )

     alerts:
       every::
        ReturnVariables("The file name is $(filename) and was editted with $(data)")
</pre>
   <p>Example 21 calls the method in example 20.

<pre class="smallexample">     #Example 21

     control:
      actionsequence = ( methods )

     methods:

      EditMethod(cf,"insert data here")
        action=cf_ex20.conf
        returnvars=results
        server=localhost

     classes:
        every = ( any )

     alerts:
        every::
          "The file name is $(EditMethod.results)"

</pre>
   <div class="node">
<p><hr>
<a name="CFEngine-built-in-methods"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#List-and-methods">List and methods</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Methods">Methods</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Declarative-language-for-Unix_002dlike-systems">Declarative language for Unix-like systems</a>

</div>

<h3 class="section">1.15 CFEngine built in methods</h3>

<p>CFEngine provides a number of built-in functions for evaluating
classes, based on file tests and perform other functions. Using these
built-in functions is quicker than calling the shell test function.
     <dl>
<dt>&lsquo;<samp><span class="samp">AccessedBefore(f1,f2)</span></samp>&rsquo;<dd>    True if file 1 was accessed more recently than file 2 (UNIX atime)
<br><dt>&lsquo;<samp><span class="samp">ChangedBefore(f1,f2)</span></samp>&rsquo;<dd>    True if file 1's attributes were changed in any way more recently than file 2's (UNIX ctime)
<br><dt>&lsquo;<samp><span class="samp">ClassMatch(regexp)</span></samp>&rsquo;<dd>    True if the quoted regular expression matches one of the currently defined classes. It is wise to place ClassMatch at the end of your parsing in order to capture as many of the user-defined classes as possible.
              classes:
                 userdef = ( ClassMatch(.*linux.*) )
<br><dt>&lsquo;<samp><span class="samp">FileExists(file)</span></samp>&rsquo;<dd>    True if the named file object (file/directory or link) exists.
<br><dt>&lsquo;<samp><span class="samp">GroupExists(groupname|gid)</span></samp>&rsquo;<dd>    True if the groupname or group id is registered on the system.
<br><dt>&lsquo;<samp><span class="samp">HostRange(basename,start-stop)</span></samp>&rsquo;<dd>    True if the current relative domain name begins with basename and ends with an integer between start and stop. Note well: matching is case insensitive (both hostname and basename are converted to all lower case for comparison.)
<br><dt>&lsquo;<samp><span class="samp">IsDefined(variable-id)</span></samp>&rsquo;<dd>    True if the named variable is defined. Note well: use the variable name, not its contents (that is, <code>IsDefined(var)</code>, and not <code>IsDefined(${var})</code>)
<br><dt>&lsquo;<samp><span class="samp">IsDir(f)</span></samp>&rsquo;<dd>    True if the file f is a directory
<br><dt>&lsquo;<samp><span class="samp">IsLink(f)</span></samp>&rsquo;<dd>    True if the file f is a symbolic link
<br><dt>&lsquo;<samp><span class="samp">IsPlain(f)</span></samp>&rsquo;<dd>    True if the file f is a plain file
<br><dt>&lsquo;<samp><span class="samp">IsNewerThan(f1,f2)</span></samp>&rsquo;<dd>    True if file 2 was modified more recently than file 1 (UNIX mtime)
<br><dt>&lsquo;<samp><span class="samp">IPRange(address-range)</span></samp>&rsquo;<dd>    True if the current host lies within the specified IP range
<br><dt>&lsquo;<samp><span class="samp">PrepModule(module,arg1 arg2...)</span></samp>&rsquo;<dd>    True if the named module exists and can be executed. The module is
assumed to follow the standard programming interface for modules (see
Writing plugin modules in tutorial). Unlike actionsequence modules,
these modules are evaluated immediately on parsing. Note that the
module should be specified relative to the authorized module
directory.

     <br><dt>&lsquo;<samp><span class="samp">Regcmp(regexp,string or list separated string)</span></samp>&rsquo;<dd>    True if the string matched the regular expression regexp.
ReturnsZero(command)
    True if the named shell command returns with exit code zero (success). The command is executed without a shell wrapper.

     <br><dt>&lsquo;<samp><span class="samp">ReturnsZeroShell(command)</span></samp>&rsquo;<dd>    True if the named shell command returns with exit code zero (success) when executed in the environment of a shell wrapper.

     <br><dt>&lsquo;<samp><span class="samp">Strcmp(s1,s2)</span></samp>&rsquo;<dd>    True if the string s1 exactly matches s2

     <br><dt>&lsquo;<samp><span class="samp">UserExists(username|uid)</span></samp>&rsquo;<dd>    True if the username or user id is registered on the system (this does not imply that the user can log in or has a home directory).

     <br><dt>&lsquo;<samp><span class="samp">IsGreaterThan(s1,s2)</span></samp>&rsquo;<dd>    Returns true if the value of s1 is greater than the value of s2. Note that, if the strings have numerical values, a numerical comparison is performed, otherwise a string comparison is used.

     <br><dt>&lsquo;<samp><span class="samp">IsLessThan(s1,s2)</span></samp>&rsquo;<dd>    Returns true if the value of s1 is less than the value of s2. Note that, if the strings have numerical values, a numerical comparison is performed, otherwise a string comparison is used.
</dl>

<!--  -->
<ul class="menu">
<li><a accesskey="1" href="#Beginner-example-21-Unix">Beginner example 21 Unix</a>
</ul>

<div class="node">
<p><hr>
<a name="Beginner-example-21-Unix"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#CFEngine-built-in-methods">CFEngine built in methods</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CFEngine-built-in-methods">CFEngine built in methods</a>

</div>

<h4 class="subsection">1.15.1 Beginner example 21 (Unix)</h4>

<pre class="smallexample">
      control:
       actionsequence = ( files )
       a = ( 2.12 )
       b = ( 2.11 )

     classes:

       lt = ( IsLessThan(${a},${b}) )
       gt = ( IsGreaterThan(${a},${b}) )

     alerts:

       lt:: "$(a) LESS THAN $(b)"
       gt:: "$(a) GREATER THAN $(b)"

</pre>
     <dl>
<dt>&lsquo;<samp><span class="samp">ExecResult(command)</span></samp>&rsquo;<dd>    Executes the named command without a shell-wrapper and inserts the output into the variable. Note that, when this is used in cfengine built-in list variables, any spaces are interpreted as list separators. In other lists, normal rules for iteration apply.
<br><dt>&lsquo;<samp><span class="samp">ExecShellResult(command)</span></samp>&rsquo;<dd>    Executes the named command with a shell-wrapper and inserts the output into the variable. Note that, when this is used in cfengine built-in list variables, any spaces are interpreted as list separators. In other lists, normal rules for iteration apply.
<br><dt>&lsquo;<samp><span class="samp">RandomInt(a,b)</span></samp>&rsquo;<dd>    Generate a random integer between a and b.
<br><dt>&lsquo;<samp><span class="samp">ReadArray(filename,fileformat,separator,comment,Max number of bytes)</span></samp>&rsquo;<dd>    Reads up to a maximum number of bytes from a properly formatted
file into a one-dimensional associated array. File formats are: (i)
&lsquo;<samp><span class="samp">autokey</span></samp>&rsquo; If this format is specified, ReadArray tries to
interpret the file as a table of items separated with the separator
character. Blank lines and comments (to end of line) are
ignored. Items are keyed numerically starting from 1 to the maximum
number in the file. The newline <code>$(n)</code> is always considered to be a
separator, no matter what the current separator is.  (ii)
&lsquo;<samp><span class="samp">textkey</span></samp>&rsquo; If this format is specified, <code>ReadArray</code> tries to
interpret the file as a list of lines of the form: key,value

     <br><dt>&lsquo;<samp><span class="samp">ReadFile(filename,Max number of bytes)</span></samp>&rsquo;<dd>    Read a maximum number of bytes from a file.

     <br><dt>&lsquo;<samp><span class="samp">ReadTable(filename,fileformat,separator,comment,Max number of bytes)</span></samp>&rsquo;<dd>    Reads up to a maximum number of bytes from a properly formatted file into a two-dimensional associated array.
    (i) &lsquo;<samp><span class="samp">autokey</span></samp>&rsquo;
        If this format is specified, ReadArray tries to interpret the file as a table of items separated with the separator character. Blank lines and comments (to end of line) are ignored. Items are keyed numerically starting from 1 to the maximum number in the file. Any lines that do not contain the correct number of separators cause the function to fail without making any assignment.
    (ii) &lsquo;<samp><span class="samp">textkey</span></samp>&rsquo;
        If this format is specified, ReadArray tries to interpret the file as a list of lines of the form:
     <pre class="smallexample">                       key1,key2,value1
                       key3,key4,value2
</pre>
     <p>This variable would then be references as $(table[key1][key2]).
<br><dt>&lsquo;<samp><span class="samp">ReadList(filename,fileformat,comment,Max number of bytes)</span></samp>&rsquo;<dd>    Reads up to a maximum number of bytes from a properly formatted file into a listvariable. File formats are:
    lines
        If this format is specified, ReadList tries to interpret the file as a list of items on separate lines. The value returned is a list formatted by the Split character.
     <pre class="smallexample">                          hosts = ( ReadList(/var/cfengine/inputs/datafile,lines,#,1000) )
</pre>
     <br><dt>&lsquo;<samp><span class="samp">ReadTCP(host/IP,portnumber,send string,Max number of bytes)</span></samp>&rsquo;<dd>    Reads up to a maximum number of bytes from a TCP service. Can be used to test whether certain services are responding to queries. It is recommended that this be used primarily to check services running on localhost. Bear in mind that this clause, executed on 100 hosts will produce the effect of a distributed denial of service attack, so the probe should be restricted to a single representative tester-host. For example:

   </dl>

<!--  -->
<div class="node">
<p><hr>
<a name="List-and-methods"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#CFEngine-built-in-methods">CFEngine built in methods</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Declarative-language-for-Unix_002dlike-systems">Declarative language for Unix-like systems</a>

</div>

<h3 class="section">1.16 List and Methods</h3>

<p>What makes cfengine method powerful is the iteration. It is possible iterate over a list using method. When a list is pass to a method cfengine will automatically iterate over the list.

<ul class="menu">
<li><a accesskey="1" href="#Beginner-example-24-Unix">Beginner example 24 Unix</a>
<li><a accesskey="2" href="#Beginner-example-25-Unix">Beginner example 25 Unix</a>
</ul>

<div class="node">
<p><hr>
<a name="Beginner-example-24-Unix"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Beginner-example-25-Unix">Beginner example 25 Unix</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#List-and-methods">List and methods</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#List-and-methods">List and methods</a>

</div>

<h4 class="subsection">1.16.1 Beginner example 24 (Unix)</h4>

<pre class="smallexample">     #cf_ex24.conf

     control:

       MethodName = ( ReturnName )
       MethodParameters = ( filename )

     classes:
        every = ( any )

     alerts:

       every::
         ReturnVariables("$(filename)")

</pre>
<p class="noindent">We call the above method with example 25

<!--  -->
<div class="node">
<p><hr>
<a name="Beginner-example-25-Unix"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Beginner-example-24-Unix">Beginner example 24 Unix</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#List-and-methods">List and methods</a>

</div>

<h4 class="subsection">1.16.2 Beginner example 25 (Unix)</h4>

<pre class="smallexample">
     control:

       actionsequence = ( methods )
       alist = ( one:two:three:four:five )

     methods:

       ReturnName($(alist))
       action=cf_ex24.conf
       returnvars=results
       server=localhost

     classes:
       every = ( any )

     alerts:
           every::
            "The file name is $(ReturnName.results)"
</pre>
<!--  -->
<div class="node">
<p><hr>
<a name="Beginners-self-test"></a>
<a name="Beginners-self_002dtest"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Declarative-language-for-Unix_002dlike-systems">Declarative language for Unix-like systems</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">2 Beginners self-test</h2>

<p><table class="cartouche" summary="cartouche" border="1"><tr><td>

     <ul>
<li>What do we use cfengine classes for
<li>Name any four rule type
<li>Explain how cfexecd functions
<li>Name and explain various cfengine components
<li>Explain why CFEngine is convergent, scalable, secure, voluntary.
<li>Outline cfengine centralized infrastructure setup

   </ul>
   </td></tr></table>

   <p><a name="Contents">

   <div class="contents">
<h2>Table of Contents</h2>
<ul>
<li><a name="toc_Top" href="#Top">CFEngine Language Fundamentals</a>
<li><a name="toc_Declarative-language-for-Unix_002dlike-systems" href="#Declarative-language-for-Unix_002dlike-systems">1 Declarative language for Unix-like systems</a>
<ul>
<li><a href="#First-Program-for-Unix">1.1 First Program for Unix</a>
<ul>
<li><a href="#CFEngine-components">1.1.1 CFEngine components</a>
</li></ul>
<li><a href="#Installation-on-Unix">1.2 Installation on Unix</a>
<li><a href="#The-structure-of-cfengine-declarative-language">1.3 The structure of cfengine declarative language</a>
<ul>
<li><a href="#Beginner-example-1-Unix">1.3.1 Beginner example 1 (Unix)</a>
<li><a href="#Beginner-example-2-Unix">1.3.2 Beginner example 2 (Unix)</a>
</li></ul>
<li><a href="#Sequence-vs-Order-Unix">1.4 Sequenece vs ordering</a>
<li><a href="#Using-Variables-in-cfengine-2-Unix">1.5 Using Variables in cfengine 2 (Unix)</a>
<ul>
<li><a href="#Beginner-example-3-Unix">1.5.1 Beginner example 3 (Unix)</a>
<li><a href="#Beginner-example-4-Unix">1.5.2 Beginner example 4 (Unix)</a>
</li></ul>
<li><a href="#Input_002doutput-Unix">1.6 Input-output (Unix)</a>
<ul>
<li><a href="#Beginner-example-5-Unix">1.6.1 Beginner example 5 (Unix)</a>
</li></ul>
<li><a href="#Escape-sequence">1.7 Escape Sequence</a>
<ul>
<li><a href="#Beginner-example-5a-Unix">1.7.1 Beginner xample 5a (UNix)</a>
</li></ul>
<li><a href="#Selection-or-Classes">1.8 Selection or Classes</a>
<ul>
<li><a href="#Beginner-example-6-Unix">1.8.1 Beginner example 6 (Unix)</a>
<li><a href="#Example-7">1.8.2 Example 7</a>
</li></ul>
<li><a href="#Logical-Operators-and-classes-Unix">1.9 Logical Operators and classes (Unix)</a>
<ul>
<li><a href="#Beginner-example-8-Unix">1.9.1 Beginner example 8 (Unix)</a>
<li><a href="#Beginner-example-9-Unix">1.9.2 Beginner example 9 (Unix)</a>
<li><a href="#Beginner-example-10-Unix">1.9.3 Beginner example 10 (Unix)</a>
</li></ul>
<li><a href="#User-Defined-Classes">1.10 User Define Classes</a>
<ul>
<li><a href="#Example-11">1.10.1 Example 11</a>
<li><a href="#Beginner-Example-12-Unix">1.10.2 Beginner Example 12 (Unix)</a>
<li><a href="#Beginner-example-13-Unix">1.10.3 Beginner example 13 (Unix)</a>
<li><a href="#Beginner-Example-14">1.10.4 Beginner Example 14 (Unix)</a>
</li></ul>
<li><a href="#File-and-log-rotation">1.11 File and log rotation</a>
<ul>
<li><a href="#Beginner-Example-16">1.11.1 Beginner Example 16 (Unix)</a>
</li></ul>
<li><a href="#List-and-Array">1.12 List and Array</a>
<ul>
<li><a href="#Beginner-example-22-Unix">1.12.1 Beginner example 22 (Unix)</a>
<li><a href="#Beginner-example-23-Unix">1.12.2 Beginner example 23 (Unix)</a>
<li><a href="#Beginner-example-23a-Unix">1.12.3 Beginner example 23a (Unix)</a>
</li></ul>
<li><a href="#Recursion">1.13 Recursion</a>
<ul>
<li><a href="#Beginner-example-23c-Unix">1.13.1 Beginner example 23c (Unix)</a>
</li></ul>
<li><a href="#Methods">1.14 Methods</a>
<ul>
<li><a href="#Beginner-example-14-Unix">1.14.1 Beginner example 14 (Unix)</a>
<li><a href="#Beginner-example-15-Unix">1.14.2 Beginner example 15 (Unix)</a>
<li><a href="#Beginner-example-16-Unix">1.14.3 Beginner example 16 (Unix)</a>
<li><a href="#Beginner-example-17-Unix">1.14.4 Beginner example 17 (Unix)</a>
<li><a href="#Method-and-return-value">1.14.5 Method and return value</a>
<li><a href="#Beginner-example-18-Unix">1.14.6 Beginner example 18 (Unix)</a>
<li><a href="#Beginner-example-19-Unix">1.14.7 Beginner example 19 (Unix)</a>
<li><a href="#Beginner-example-20-Unix">1.14.8 Beginner example 20 (Unix)</a>
</li></ul>
<li><a href="#CFEngine-built-in-methods">1.15 CFEngine built in methods</a>
<ul>
<li><a href="#Beginner-example-21-Unix">1.15.1 Beginner example 21 (Unix)</a>
</li></ul>
<li><a href="#List-and-methods">1.16 List and Methods</a>
<ul>
<li><a href="#Beginner-example-24-Unix">1.16.1 Beginner example 24 (Unix)</a>
<li><a href="#Beginner-example-25-Unix">1.16.2 Beginner example 25 (Unix)</a>
</li></ul>
</li></ul>
<li><a name="toc_Beginners-self_002dtest" href="#Beginners-self_002dtest">2 Beginners self-test</a>
</li></ul>
</div>

   <p><script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-2576171-2");
pageTracker._initData();
pageTracker._trackPageview();
</script>

</body></html>

